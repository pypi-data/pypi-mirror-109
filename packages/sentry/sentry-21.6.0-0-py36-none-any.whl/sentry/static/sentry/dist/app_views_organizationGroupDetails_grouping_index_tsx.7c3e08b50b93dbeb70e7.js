(self.webpackChunk=self.webpackChunk||[]).push([["app_views_organizationGroupDetails_grouping_index_tsx"],{"./app/views/organizationGroupDetails/grouping/index.tsx":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Q});var r=n("./app/components/acl/feature.tsx"),s=n("./app/components/alert.tsx"),o=n("./app/locale.tsx"),i=n("./app/styles/organization.tsx"),a=n("./app/utils/withOrganization.tsx"),u=(n("../node_modules/core-js/modules/es.object.keys.js"),n("../node_modules/core-js/modules/es.symbol.js"),n("../node_modules/core-js/modules/es.array.filter.js"),n("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),n("../node_modules/core-js/modules/es.array.for-each.js"),n("../node_modules/core-js/modules/web.dom-collections.for-each.js"),n("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),n("../node_modules/core-js/modules/es.object.define-properties.js"),n("../node_modules/core-js/modules/es.object.define-property.js"),n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js")),l=n("../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),d=n("../node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),c=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),p=n("../node_modules/@babel/runtime/regenerator/index.js"),m=n.n(p),g=(n("../node_modules/core-js/modules/es.number.constructor.js"),n("../node_modules/core-js/modules/es.array.find.js"),n("../node_modules/core-js/modules/es.array.concat.js"),n("../node_modules/core-js/modules/es.regexp.exec.js"),n("../node_modules/core-js/modules/es.string.search.js"),n("../node_modules/core-js/modules/es.array.map.js"),n("../node_modules/core-js/modules/es.array.is-array.js"),n("../node_modules/react/index.js")),f=n("../node_modules/lodash/debounce.js"),h=n.n(f),v=n("./app/components/button.tsx"),Z=n("./app/components/emptyStateWarning.tsx"),b=n("./app/components/list/index.tsx"),y=n("./app/components/list/listItem.tsx"),j=n("./app/components/loadingError.tsx"),x=n("./app/components/loadingIndicator.tsx"),w=n("./app/components/pagination.tsx"),_=n("./app/constants/index.tsx"),S=n("./app/icons/index.tsx"),k=n("./app/styles/space.tsx"),z=n("./app/utils/parseLinkHeader.tsx"),O=n("./app/utils/withApi.tsx"),E=n("./app/views/settings/components/emptyMessage.tsx"),P=n("./app/views/settings/components/forms/controls/rangeSlider.tsx"),N=n("./app/components/card.tsx"),B=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function X(e){var t=e.sampleEvent,n=e.eventCount,r=e.isReloading,s=t.title,i=t.culprit;return(0,B.BX)(D,{interactive:!1,isReloading:r,children:[(0,B.BX)("div",{children:[(0,B.tZ)(L,{children:s}),(0,B.tZ)(q,{children:i})]}),(0,B.BX)(A,{children:[n,(0,B.tZ)(G,{children:(0,o.tn)("Error","Errors",n)})]})]})}X.displayName="NewIssue";const C=X;var D=(0,c.Z)(N.Z,{target:"ebu51d34"})("margin-bottom:-1px;overflow:hidden;display:grid;grid-template-columns:1fr max-content;align-items:center;padding:",(0,k.Z)(1.5)," ",(0,k.Z)(2),";grid-gap:",(0,k.Z)(2),";word-break:break-word;",(function(e){return e.isReloading&&"\n      opacity: 0.5;\n      pointer-events: none;\n    "}),";"),L=(0,c.Z)("div",{target:"ebu51d33"})("font-size:",(function(e){return e.theme.fontSizeLarge}),";font-weight:700;"),q=(0,c.Z)("div",{target:"ebu51d32"})("font-size:",(function(e){return e.theme.fontSizeMedium}),";"),A=(0,c.Z)("div",{target:"ebu51d31"})({name:"1784rlw",styles:"display:grid;align-items:center;justify-items:center"}),G=(0,c.Z)("div",{target:"ebu51d30"})("text-transform:uppercase;font-weight:500;color:",(function(e){return e.theme.gray300}),";font-size:",(function(e){return e.theme.fontSizeSmall}),";");function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(e){var t,n,r=e.api,s=e.groupId,i=e.location,a=(0,g.useState)(!1),u=(0,d.Z)(a,2),c=u[0],p=u[1],f=(0,g.useState)(!1),b=(0,d.Z)(f,2),y=b[0],k=b[1],O=(0,g.useState)(void 0),P=(0,d.Z)(O,2),N=P[0],X=P[1],D=(0,g.useState)([]),L=(0,d.Z)(D,2),q=L[0],A=L[1],G=(0,g.useState)(void 0),I=(0,d.Z)(G,2),T=I[0],H=I[1],K=(0,g.useState)([]),Q=(0,d.Z)(K,2),$=Q[0],ee=Q[1],te=(0,g.useState)(""),ne=(0,d.Z)(te,2),re=ne[0],se=ne[1];(0,g.useEffect)((function(){ie()}),[]),(0,g.useEffect)((function(){var e;(e=q.find((function(e){return e.isCurrent})))&&H(Number(e.id))}),[q]),(0,g.useEffect)((function(){!function(){ue.apply(this,arguments)}()}),[T,i.query]);var oe=h()((function(e){H(Number(e))}),_.Dk);function ie(){return ae.apply(this,arguments)}function ae(){return(ae=(0,l.Z)(m().mark((function e(){var t;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),X(void 0),e.prev=2,e.next=5,r.requestPromise("/issues/".concat(s,"/grouping/levels/"));case 5:t=e.sent,p(!1),A(t.levels),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),p(!1),X(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}function ue(){return(ue=(0,l.Z)(m().mark((function e(){var t,n,o,a,u,l;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(q.length){e.next=2;break}return e.abrupt("return");case 2:return k(!0),X(void 0),e.prev=4,e.next=7,r.requestPromise("/issues/".concat(s,"/grouping/levels/").concat(T,"/new-issues/"),{method:"GET",includeAllArgs:!0,query:R(R({},i.query),{},{per_page:10})});case 7:n=e.sent,o=(0,d.Z)(n,3),a=o[0],u=o[2],l=u&&(null===(t=u.getResponseHeader)||void 0===t?void 0:t.call(u,"Link")),se(null!=l?l:""),ee(Array.isArray(a)?a:[a]),k(!1),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(4),k(!1),X(e.t0);case 21:case"end":return e.stop()}}),e,null,[[4,17]])})))).apply(this,arguments)}if(c)return(0,B.tZ)(x.Z,{});if(N){var le;if(403===N.status&&null!==(le=N.responseJSON)&&void 0!==le&&le.detail){var de=N.responseJSON.detail,ce=de.message,pe=de.code;return(0,B.tZ)(J,{children:(0,B.tZ)(E.Z,{size:"large",icon:(0,B.tZ)(S.Gy,{size:"xl"}),action:"merged_issues"===pe?(0,B.tZ)(v.ZP,{to:"/organizations/sentry/issues/".concat(s,"/merged/?").concat(i.search),children:(0,o.t)("Unmerge issue")}):void 0,children:ce})})}return(0,B.tZ)(j.Z,{message:(0,o.t)("Unable to load grouping levels, please try again later"),onRetry:ie})}if(!q.length)return(0,B.tZ)(Z.Z,{withIcon:!1,children:(0,o.t)("No grouping levels have been found.")});var me=(0,z.Z)(re),ge=(null===(t=me.previous)||void 0===t?void 0:t.results)||(null===(n=me.next)||void 0===n?void 0:n.results);return(0,B.BX)(J,{children:[(0,B.tZ)(M,{children:(0,o.t)("Sometimes you might want to split up issues by additional frames or other criteria. Select a granularity level below and see how many new issues will be created in the process.")}),(0,B.BX)("div",{children:[(0,B.BX)(V,{symbol:"colored-numeric",children:[(0,B.BX)(U,{children:[(0,o.t)("Select level"),(0,B.tZ)(W,{name:"grouping-level",allowedValues:q.map((function(e){return Number(e.id)})),formatLabel:function(e){return 0===e?(0,o.t)("Automatically grouped"):(0,o.t)("Level %s",e)},value:null!=T?T:0,onChange:oe})]}),(0,B.BX)(U,{children:[(0,B.BX)("div",{children:[(0,o.t)("What happens to this issue"),(0,B.tZ)(F,{children:(0,o._N)("This issue will be deleted and [quantity] new issues will be created.",{quantity:ge?"".concat($.length,"+"):$.length})})]}),(0,B.tZ)(Y,{children:$.map((function(e){var t=e.hash,n=e.latestEvent,r=e.eventCount;return(0,B.tZ)(C,{sampleEvent:n,eventCount:r,isReloading:y},t)}))})]})]}),(0,B.tZ)(w.Z,{pageLinks:re})]})]})}T.displayName="Grouping";const H=(0,O.Z)(T);var J=(0,c.Z)("div",{target:"e1m7ctwt6"})("flex:1;display:grid;align-content:flex-start;background:",(function(e){return e.theme.background}),";grid-gap:",(0,k.Z)(2),";margin:-",(0,k.Z)(3)," -",(0,k.Z)(4),";padding:",(0,k.Z)(3)," ",(0,k.Z)(4),";"),M=(0,c.Z)("p",{target:"e1m7ctwt5"})("margin-bottom:",(0,k.Z)(.5),";"),U=(0,c.Z)(y.Z,{target:"e1m7ctwt4"})("display:grid;grid-gap:",(0,k.Z)(1.5),";"),W=(0,c.Z)(P.Z,{target:"e1m7ctwt3"})({name:"1hetg88",styles:"max-width:300px"}),V=(0,c.Z)(b.Z,{target:"e1m7ctwt2"})("display:grid;grid-gap:",(0,k.Z)(2),";font-size:",(function(e){return e.theme.fontSizeExtraLarge}),";"),Y=(0,c.Z)("div",{target:"e1m7ctwt1"})("display:grid;grid-template-columns:minmax(100px, 1fr);grid-gap:",(0,k.Z)(2),";@media (min-width: ",(function(e){return e.theme.breakpoints[1]}),"){grid-template-columns:repeat(2, minmax(100px, 1fr));}@media (min-width: ",(function(e){return e.theme.breakpoints[2]}),"){grid-template-columns:repeat(3, minmax(100px, 1fr));}"),F=(0,c.Z)("div",{target:"e1m7ctwt0"})("color:",(function(e){return e.theme.subText}),";font-size:",(function(e){return e.theme.fontSizeLarge}),";");function K(e){var t=e.organization,n=e.params,a=e.location,u=e.project;return(0,B.tZ)(r.Z,{features:["grouping-tree-ui"],organization:t,renderDisabled:function(){return(0,B.tZ)(i.JH,{children:(0,B.tZ)(s.Z,{type:"warning",children:(0,o.t)("You don't have access to this feature")})})},children:(0,B.tZ)(H,{location:a,groupId:n.groupId,organization:t,project:u})})}K.displayName="GroupingContainer";const Q=(0,a.Z)(K)}}]);
//# sourceMappingURL=app_views_organizationGroupDetails_grouping_index_tsx.js.map