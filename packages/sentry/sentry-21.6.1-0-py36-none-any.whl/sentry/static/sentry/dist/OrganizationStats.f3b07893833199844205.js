(self.webpackChunk=self.webpackChunk||[]).push([["OrganizationStats","app_components_sentryDocumentTitle_tsx"],{"./app/components/gridEditable/sortLink.tsx":(t,e,r)=>{"use strict";r.d(e,{Z:()=>Z}),r("../node_modules/core-js/modules/es.reflect.construct.js"),r("../node_modules/core-js/modules/es.object.keys.js"),r("../node_modules/core-js/modules/es.symbol.js"),r("../node_modules/core-js/modules/es.array.filter.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),r("../node_modules/core-js/modules/es.array.for-each.js"),r("../node_modules/core-js/modules/web.dom-collections.for-each.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),r("../node_modules/core-js/modules/es.object.define-properties.js"),r("../node_modules/core-js/modules/es.object.define-property.js");var n=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),a=r("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),o=r("../node_modules/@babel/runtime/helpers/esm/createClass.js"),i=r("../node_modules/@babel/runtime/helpers/esm/inherits.js"),s=r("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),c=r("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),l=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),u=r("../node_modules/react/index.js"),d=r("../node_modules/lodash/omit.js"),p=r.n(d),h=r("./app/components/links/link.tsx"),m=r("./app/icons/index.tsx"),f=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function g(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}var y=function(t){(0,i.Z)(l,t);var e,r,n=(e=l,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,c.Z)(e);if(r){var a=(0,c.Z)(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return(0,s.Z)(this,t)});function l(){return(0,a.Z)(this,l),n.apply(this,arguments)}return(0,o.Z)(l,[{key:"renderArrow",value:function(){var t=this.props.direction;return t?"desc"===t?(0,f.tZ)(j,{size:"xs",direction:"down"}):(0,f.tZ)(j,{size:"xs",direction:"up"}):null}},{key:"render",value:function(){var t=this.props,e=t.align,r=t.title,n=t.canSort,a=t.generateSortLink,o=t.onClick,i=a();return i&&n?(0,f.BX)(v,{align:e,to:i,onClick:o,children:[r," ",this.renderArrow()]}):(0,f.tZ)(b,{align:e,children:r})}}]),l}(u.Component);y.displayName="SortLink";var v=(0,l.Z)((function(t){var e=p()(t,["align"]);return(0,f.tZ)(h.Z,function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?g(Object(r),!0).forEach((function(e){(0,n.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},e))}),{target:"e1xb2te62"})("display:block;width:100%;white-space:nowrap;color:inherit;&:hover,&:active,&:focus,&:visited{color:inherit;}",(function(t){return t.align?"text-align: ".concat(t.align,";"):""}),";"),b=(0,l.Z)("div",{target:"e1xb2te61"})("display:block;width:100%;white-space:nowrap;",(function(t){return t.align?"text-align: ".concat(t.align,";"):""}),";"),j=(0,l.Z)(m.CC,{target:"e1xb2te60"})({name:"40f4ru",styles:"vertical-align:top"});const Z=y},"./app/components/notAvailable.tsx":(t,e,r)=>{"use strict";r.d(e,{Z:()=>l});var n=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=(r("../node_modules/react/index.js"),r("./app/components/tooltip.tsx")),o=r("./app/utils.tsx"),i=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function s(t){var e=t.tooltip;return(0,i.tZ)(c,{children:(0,i.tZ)(a.Z,{title:e,disabled:!(0,o.ri)(e),children:"—"})})}s.displayName="NotAvailable";var c=(0,n.Z)("div",{target:"e1ickyb10"})("color:",(function(t){return t.theme.gray200}),";");const l=s},"./app/components/scoreCard.tsx":(t,e,r)=>{"use strict";r.d(e,{Gh:()=>m,wk:()=>h,BE:()=>y,Zh:()=>g,UR:()=>v,ZP:()=>b});var n=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=(r("../node_modules/react/index.js"),r("./app/components/panels/index.tsx")),o=r("./app/components/questionTooltip.tsx"),i=r("./app/components/textOverflow.tsx"),s=r("./app/styles/overflowEllipsis.tsx"),c=r("./app/styles/space.tsx"),l=r("./app/utils.tsx"),u=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function d(t){var e=t.title,r=t.score,n=t.help,a=t.trend,s=t.trendStatus,c=t.className;return(0,u.BX)(h,{className:c,children:[(0,u.BX)(m,{children:[(0,u.tZ)(f,{children:e}),n&&(0,u.tZ)(o.Z,{title:n,size:"sm",position:"top"})]}),(0,u.BX)(g,{children:[(0,u.tZ)(y,{children:null!=r?r:"—"}),(0,l.ri)(a)&&(0,u.tZ)(v,{trendStatus:s,children:(0,u.tZ)(i.Z,{children:a})})]})]})}function p(t){switch(t.trendStatus){case"good":return t.theme.green300;case"bad":return t.theme.red300;default:return t.theme.gray300}}d.displayName="ScoreCard";var h=(0,n.Z)(a.s_,{target:"e179ouq55"})("display:flex;flex-direction:column;justify-content:space-between;padding:",(0,c.Z)(2)," ",(0,c.Z)(3),";min-height:96px;"),m=(0,n.Z)("div",{target:"e179ouq54"})("display:inline-grid;grid-auto-flow:column;grid-gap:",(0,c.Z)(1),";align-items:center;width:fit-content;"),f=(0,n.Z)("div",{target:"e179ouq53"})(s.Z,";"),g=(0,n.Z)("div",{target:"e179ouq52"})({name:"ph5vh8",styles:"display:flex;flex-direction:row;align-items:flex-end;max-width:100%"}),y=(0,n.Z)("span",{target:"e179ouq51"})({name:"1ev0dst",styles:"flex-shrink:1;font-size:32px;line-height:1;white-space:nowrap"}),v=(0,n.Z)("div",{target:"e179ouq50"})("color:",p,";margin-left:",(0,c.Z)(1),";line-height:1;overflow:hidden;");const b=d},"./app/components/sentryDocumentTitle.tsx":(t,e,r)=>{"use strict";r.d(e,{Z:()=>s}),r("../node_modules/core-js/modules/es.array.concat.js"),r("../node_modules/react/index.js");var n=r("../node_modules/react-document-title/index.js"),a=r.n(n),o=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function i(t){var e=t.title,r=t.orgSlug,n=t.projectSlug,i=t.children,s=r||n?r&&n?"".concat(e," - ").concat(r," - ").concat(n):r?"".concat(e," - ").concat(r):"".concat(e," - ").concat(n):e;return(0,o.tZ)(a(),{title:"".concat(s," - Sentry"),children:i})}i.displayName="SentryDocumentTitle";const s=i},"./app/views/organizationStats/index.tsx":(t,e,r)=>{"use strict";r.r(e),r.d(e,{OrganizationStats:()=>ce,default:()=>le}),r("../node_modules/core-js/modules/es.reflect.construct.js"),r("../node_modules/core-js/modules/es.object.keys.js"),r("../node_modules/core-js/modules/es.symbol.js"),r("../node_modules/core-js/modules/es.array.filter.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),r("../node_modules/core-js/modules/es.array.for-each.js"),r("../node_modules/core-js/modules/web.dom-collections.for-each.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),r("../node_modules/core-js/modules/es.object.define-properties.js"),r("../node_modules/core-js/modules/es.object.define-property.js");var n=r("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),a=r("../node_modules/@babel/runtime/helpers/esm/createClass.js"),o=r("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),i=r("../node_modules/@babel/runtime/helpers/esm/inherits.js"),s=r("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),c=r("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),l=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),u=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),d=(r("../node_modules/core-js/modules/es.array.concat.js"),r("../node_modules/core-js/modules/es.array.map.js"),r("../node_modules/core-js/modules/es.array.sort.js"),r("../node_modules/react/index.js")),p=r("../node_modules/lodash/omit.js"),h=r.n(p),m=r("../node_modules/lodash/pick.js"),f=r.n(m),g=r("../node_modules/moment/moment.js"),y=r.n(g),v=r("./app/components/dropdownControl.tsx"),b=r("./app/components/errorBoundary.tsx"),j=r("./app/components/organizations/globalSelectionHeader/getParams.tsx"),Z=r("./app/components/organizations/timeRangeSelector/index.tsx"),x=r("./app/components/pageHeading.tsx"),D=r("./app/components/panels/index.tsx"),C=r("./app/components/sentryDocumentTitle.tsx"),E=r("./app/constants/index.tsx"),S=r("./app/locale.tsx"),O=r("./app/styles/organization.tsx"),T=r("./app/styles/space.tsx"),P=r("./app/types/index.tsx"),k=r("./app/utils/withOrganization.tsx"),w=r("../node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),A=(r("../node_modules/core-js/modules/es.array.find.js"),r("../node_modules/core-js/modules/es.array.slice.js"),r("../node_modules/@emotion/react/dist/emotion-element-4fbd89c5.browser.esm.js")),R=r("../node_modules/color/index.js"),_=r.n(R),L=r("./app/components/charts/baseChart.tsx"),I=r("./app/components/charts/components/legend.tsx"),z=r("./app/components/charts/components/tooltip.tsx"),U=r("./app/components/charts/components/xAxis.tsx"),N=r("./app/components/charts/series/barSeries.tsx"),M=r("./app/components/charts/styles.tsx"),B=r("./app/components/loadingIndicator.tsx"),q=r("./app/components/panels/panel.tsx"),F=r("./app/components/placeholder.tsx"),X=r("./app/icons/index.tsx"),H=r("./app/utils/dates.tsx"),J=r("./app/utils/formatters.tsx"),Q=r("./app/utils/theme.tsx"),V=(r("../node_modules/core-js/modules/es.number.to-fixed.js"),r("./app/components/charts/utils.tsx")),G=r("./app/utils.tsx"),Y=Math.pow(10,6),W=Math.pow(10,9),K=Math.pow(10,9);function $(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{isAbbreviated:!1,useUnitScaling:!1};if(e!==P.cn.ATTACHMENTS)return r.isAbbreviated?et(t):t.toLocaleString();if(r.useUnitScaling)return(0,G.E9)(t);var n=t/K;return r.isAbbreviated?"".concat(et(n)," GB"):"".concat(n.toLocaleString(void 0,{maximumFractionDigits:2})," GB")}function tt(t){return{isAbbreviated:t!==P.cn.ATTACHMENTS,useUnitScaling:t===P.cn.ATTACHMENTS}}function et(t){return t>=W?(t/W).toLocaleString(void 0,{maximumFractionDigits:2})+"B":t>=Y?(t/Y).toLocaleString(void 0,{maximumFractionDigits:1})+"M":t>=1e3?(t/1e3).toFixed().toLocaleString()+"K":t.toFixed().toLocaleString()}var rt="MMM D",nt="MMM D LT";function at(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1d",r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=(0,H.YJ)(e)/24;if(n>=1)return y().utc(t).format(rt);var a=(0,j.s)(e),o=r?y()(t).utc():y()(t).local();return a?"".concat(o.format(nt)," - ").concat(o.add(a.period,a.periodLength).format("LT (Z)")):o.format(nt)}function ot(t,e){var r,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"1d",o=[],i=y()(t).utc().startOf("h"),s=y()(e).startOf("h");if(!i.isValid()||!s.isValid())return o;for(var c=null!==(r=(0,j.s)(a))&&void 0!==r?r:{period:1,periodLength:"d"},l=c.period,u=c.periodLength;!i.isAfter(s);)o.push(at(i,a,n)),i.add(l,u);return o}function it(t){return t===P.cn.ATTACHMENTS?function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return $(t,P.cn.ATTACHMENTS,{useUnitScaling:!0})}:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t.toLocaleString()}}var st=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function ct(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function lt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ct(Object(r),!0).forEach((function(e){(0,l.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ct(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var ut,dt=_()(Q.ZP.dataCategory.errors).lighten(.25).string(),pt=_()(Q.ZP.dataCategory.transactions).lighten(.35).string(),ht=_()(Q.ZP.dataCategory.attachments).lighten(.65).string(),mt=Q.ZP.red300,ft=Q.ZP.gray100,gt=[{label:P.mL[P.cn.ERRORS],value:P.cn.ERRORS,disabled:!1},{label:P.mL[P.cn.TRANSACTIONS],value:P.cn.TRANSACTIONS,disabled:!1},{label:P.mL[P.cn.ATTACHMENTS],value:P.cn.ATTACHMENTS,disabled:!1}];!function(t){t.CUMULATIVE="cumulative",t.PERIODIC="periodic"}(ut||(ut={}));var yt,vt=[{label:(0,S.t)("Cumulative"),value:ut.CUMULATIVE,disabled:!1},{label:(0,S.t)("Periodic"),value:ut.PERIODIC,disabled:!1}];!function(t){t.ACCEPTED="Accepted",t.DROPPED="Dropped",t.PROJECTED="Projected"}(yt||(yt={}));var bt=function(t){(0,i.Z)(p,t);var e,r,u=(e=p,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,c.Z)(e);if(r){var a=(0,c.Z)(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return(0,s.Z)(this,t)});function p(){var t;(0,n.Z)(this,p);for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return t=u.call.apply(u,[this].concat(r)),(0,l.Z)((0,o.Z)(t),"state",{xAxisDates:[]}),t}return(0,a.Z)(p,[{key:"chartColors",get:function(){var t=this.props.dataCategory;return t===P.cn.ERRORS?[dt,mt,ft]:t===P.cn.ATTACHMENTS?[ht,mt,ft]:[pt,mt,ft]}},{key:"chartMetadata",get:function(){var t=this.props,e=t.usageDateStart,r=t.usageDateEnd,n=this.props,a=n.usageDateInterval,o=n.usageStats,i=n.dataCategory,s=n.dataTransform,c=n.handleDataTransformation,l=this.state.xAxisDates,u=gt.find((function(t){return t.value===i}));if(!u)throw new Error("Selected item is not supported");var d=lt({},c(o,s));Object.keys(d).forEach((function(t){var e=t===yt.PROJECTED;d[t]=d[t].map((function(t){return lt(lt({},t),{},{tooltip:{show:!1},itemStyle:{opacity:e?.6:1}})}))}));var p=24*(0,H.Ri)(void 0,e,r),h=(0,H.YJ)(a);if(p<0||h<0)throw new Error("UsageChart: Unable to parse data time period");var m=function(t,e){return t>168?function(t,e){var r=t/24;if(r<=7)throw new Error("This method should be used for periods > 7 days");for(var n=r,a=n,o=[2,4,7,14],i=[1,2,7,7],s=0;s<o.length&&a>10;s++)a=n/o[s],n=r/i[s];return{xAxisTickInterval:e/n-1,xAxisLabelInterval:e/a-1}}(t,e):function(t,e){var r=t/24;if(r>7)throw new Error("This method should be used for periods <= 7 days");var n=e/r;return{xAxisTickInterval:n-1,xAxisLabelInterval:n-1}}(t,e)}(p,p/h),f=m.xAxisTickInterval,g=m.xAxisLabelInterval,y=u.label,v=u.value;return v===P.cn.ERRORS||v===P.cn.TRANSACTIONS?{chartLabel:y,chartData:d,xAxisData:l,xAxisTickInterval:f,xAxisLabelInterval:g,yAxisMinInterval:100,yAxisFormatter:J.Du,tooltipValueFormatter:it(i)}:{chartLabel:y,chartData:d,xAxisData:l,xAxisTickInterval:f,xAxisLabelInterval:g,yAxisMinInterval:.5*K,yAxisFormatter:function(t){return $(t,P.cn.ATTACHMENTS,{isAbbreviated:!0,useUnitScaling:!0})},tooltipValueFormatter:it(i)}}},{key:"chartSeries",get:function(){var t=this.props.chartSeries,e=this.chartMetadata.chartData,r=[(0,N.Z)({name:yt.ACCEPTED,data:e.accepted,barMinHeight:1,stack:"usage",legendHoverLink:!1}),(0,N.Z)({name:yt.DROPPED,data:e.dropped,stack:"usage",legendHoverLink:!1}),(0,N.Z)({name:yt.PROJECTED,data:e.projected,barMinHeight:1,stack:"usage",legendHoverLink:!1})];return t&&(r=r.concat(t)),r}},{key:"chartLegend",get:function(){var t=this.chartMetadata.chartData,e=[{name:yt.ACCEPTED}];return t.dropped.length>0&&e.push({name:yt.DROPPED}),t.projected.length>0&&e.push({name:yt.PROJECTED}),e}},{key:"chartTooltip",get:function(){var t=this.props.chartTooltip;if(t)return t;var e=this.chartMetadata.tooltipValueFormatter;return(0,z.Z)({trigger:"axis",valueFormatter:e})}},{key:"renderChart",value:function(){var t=this.props,e=t.theme,r=t.title,n=t.isLoading,a=t.isError,o=t.errors;if(n)return(0,st.tZ)(F.Z,{height:"200px",children:(0,st.tZ)(B.Z,{mini:!0})});if(a)return(0,st.BX)(F.Z,{height:"200px",children:[(0,st.tZ)(X.FC,{size:e.fontSizeExtraLarge}),(0,st.tZ)(xt,{children:o&&Object.keys(o).map((function(t){var e;return(0,st.tZ)("span",{children:null===(e=o[t])||void 0===e?void 0:e.message},t)}))})]});var i=this.chartMetadata,s=i.xAxisData,c=i.xAxisTickInterval,l=i.xAxisLabelInterval,u=i.yAxisMinInterval,p=i.yAxisFormatter;return(0,st.BX)(d.Fragment,{children:[(0,st.tZ)(M.ws,{children:r||(0,S.t)("Current Usage Period")}),(0,st.tZ)(L.Z,{colors:this.chartColors,grid:{bottom:"3px",left:"0px",right:"10px",top:"40px"},xAxis:(0,U.Z)({show:!0,type:"category",name:"Date",boundaryGap:!0,data:s,axisTick:{interval:c,alignWithLabel:!0},axisLabel:{interval:l,formatter:function(t){return t.slice(0,6)}},theme:e}),yAxis:{min:0,minInterval:u,axisLabel:{formatter:p,color:e.chartLabel}},series:this.chartSeries,tooltip:this.chartTooltip,onLegendSelectChanged:function(){},legend:(0,I.Z)({right:10,top:5,data:this.chartLegend,theme:e})})]})}},{key:"render",value:function(){var t=this.props.footer;return(0,st.BX)(q.Z,{id:"usage-chart",children:[(0,st.tZ)(M.BO,{children:this.renderChart()}),t]})}}],[{key:"getDerivedStateFromProps",value:function(t,e){var r=t.usageDateStart,n=t.usageDateEnd,a=t.usageDateShowUtc,o=t.usageDateInterval;return lt(lt({},e),{},{xAxisDates:ot(r,n,a,o)})}}]),p}(d.Component);bt.displayName="UsageChart",(0,l.Z)(bt,"defaultProps",{usageDateShowUtc:!0,usageDateInterval:"1d",handleDataTransformation:function(t,e){var r={accepted:[],dropped:[],projected:[]},n=e===ut.CUMULATIVE;return Object.keys(t).forEach((function(e){var a=0;r[e]=t[e].map((function(t){var e=(0,w.Z)(t.value,2),r=e[0],o=e[1];return a=n?a+o:o,lt(lt({},t),{},{value:[r,a]})}))})),r}});const jt=(0,A.b)(bt);var Zt,xt=(0,u.Z)("div",{target:"erx9nbs0"})("display:flex;flex-direction:column;margin-top:",(0,T.Z)(1),";font-size:",(function(t){return t.theme.fontSizeSmall}),";"),Dt=(r("../node_modules/core-js/modules/es.array.includes.js"),r("../node_modules/core-js/modules/es.string.includes.js"),r("../node_modules/@sentry/minimal/esm/index.js")),Ct=r("./app/components/asyncComponent.tsx"),Et=r("./app/components/charts/optionSelector.tsx"),St=r("./app/components/notAvailable.tsx"),Ot=r("./app/components/scoreCard.tsx");!function(t){t.ACCEPTED="accepted",t.FILTERED="filtered",t.INVALID="invalid",t.DROPPED="dropped",t.RATE_LIMITED="rate_limited"}(Zt||(Zt={})),r("../node_modules/core-js/modules/es.array.reduce.js");const Tt=function(t){(0,i.Z)(l,t);var e,r,o=(e=l,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,c.Z)(e);if(r){var a=(0,c.Z)(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return(0,s.Z)(this,t)});function l(){return(0,n.Z)(this,l),o.apply(this,arguments)}return(0,a.Z)(l,[{key:"getEndpoints",value:function(){return[["orgStats",this.endpointPath,{query:this.endpointQuery}]]}},{key:"endpointPath",get:function(){var t=this.props.organization;return"/organizations/".concat(t.slug,"/stats_v2/")}},{key:"endpointQuery",get:function(){return{statsPeriod:"5m",interval:"1m",groupBy:["category","outcome"],field:["sum(quantity)"]}}},{key:"minuteData",get:function(){var t=this.props.dataCategory,e=this.state,r=e.loading,n=e.error,a=e.orgStats;if(!r&&!n&&a&&0!==a.intervals.length){var o=a.intervals,i=a.groups,s=Math.max(o.length-2,0);return $(i.reduce((function(e,r){var n=r.by,a=n.outcome,o=n.category;return t.includes("".concat(o))&&a===Zt.ACCEPTED?e+=r.series["sum(quantity)"][s]:e}),0),t,tt(t))}}},{key:"renderComponent",value:function(){return this.minuteData?(0,st.BX)(Pt,{children:[this.minuteData," ",(0,S.t)("in last min")]}):null}}]),l}(Ct.Z);var Pt=(0,u.Z)("div",{target:"e2asf1f0"})("display:inline-block;color:",(function(t){return t.theme.success}),";font-size:",(function(t){return t.theme.fontSizeMedium}),";");function kt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function wt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?kt(Object(r),!0).forEach((function(e){(0,l.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}const At=function(t){(0,i.Z)(p,t);var e,r,u=(e=p,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,c.Z)(e);if(r){var a=(0,c.Z)(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return(0,s.Z)(this,t)});function p(){var t;(0,n.Z)(this,p);for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return t=u.call.apply(u,[this].concat(r)),(0,l.Z)((0,o.Z)(t),"renderChartFooter",(function(){var e=t.props.handleChangeState,r=t.state,n=r.loading,a=r.error,o=t.chartData,i=o.chartDateInterval,s=o.chartTransform,c=o.chartDateStartDisplay,l=o.chartDateEndDisplay,u=o.chartDateTimezoneDisplay;return(0,st.BX)(Lt,{children:[(0,st.tZ)(M.m2,{children:(0,st.BX)(It,{children:[(0,st.tZ)(M.OT,{children:(0,S.t)("Date Range:")}),(0,st.tZ)("span",{children:n||a?(0,st.tZ)(St.Z,{}):(0,S._N)("[start] — [end] ([timezone] UTC, [interval] interval)",{start:c,end:l,timezone:u,interval:i})})]})}),(0,st.tZ)(M.m2,{children:(0,st.tZ)(Et.Z,{title:(0,S.t)("Type"),selected:s,options:vt,onChange:function(t){return e({transform:t})}})})]})})),t}return(0,a.Z)(p,[{key:"componentDidUpdate",value:function(t){var e=t.dataDatetime,r=this.props.dataDatetime;e.start===r.start&&e.end===r.end&&e.period===r.period&&e.utc===r.utc||this.reloadData()}},{key:"getEndpoints",value:function(){return[["orgStats",this.endpointPath,{query:this.endpointQuery}]]}},{key:"endpointPath",get:function(){var t=this.props.organization;return"/organizations/".concat(t.slug,"/stats_v2/")}},{key:"endpointQuery",get:function(){var t=this.props.dataDatetime;return wt(wt({},t.start&&t.end?{start:t.start,end:t.end,utc:t.utc}:{statsPeriod:t.period||E.GY}),{},{interval:(0,V.EX)(t),groupBy:["category","outcome"],field:["sum(quantity)"]})}},{key:"chartData",get:function(){var t=this.state.orgStats;return wt(wt(wt({},this.mapSeriesToChart(t)),this.chartDateRange),this.chartTransform)}},{key:"chartTransform",get:function(){var t=this.props.chartTransform;switch(t){case ut.CUMULATIVE:case ut.PERIODIC:return{chartTransform:t};default:return{chartTransform:ut.PERIODIC}}}},{key:"chartDateRange",get:function(){var t=this.state.orgStats,e=this.props.dataDatetime,r=(0,V.EX)(e);if(!t||!t.intervals)return{chartDateInterval:r,chartDateStart:"",chartDateEnd:"",chartDateUtc:!0,chartDateStartDisplay:"",chartDateEndDisplay:"",chartDateTimezoneDisplay:""};var n=t.intervals,a=(0,H.YJ)(r),o=y()(n[0]).utc(),i=n.length<2?y()(o):y()(n[n.length-1]).utc(),s=function(t){if(t.utc)return!0;var e=(0,V.EX)(t);return(0,H.YJ)(e)>=24}(e),c=a>=24?rt:nt,l=y()(o),u=y()(i),d=s?y()(o).utc():y()(o).local(),p=s?y()(i).utc():y()(i).local();return a<24&&p.add(a,"h"),{chartDateInterval:r,chartDateStart:l.format(),chartDateEnd:u.format(),chartDateUtc:s,chartDateStartDisplay:d.format(c),chartDateEndDisplay:p.format(c),chartDateTimezoneDisplay:d.format("Z")}}},{key:"mapSeriesToChart",value:function(t){var e=this,r={total:void 0,accepted:void 0,dropped:void 0,filtered:void 0},n={accepted:[],dropped:[],projected:[]};if(!t)return{cardStats:r,chartStats:n};try{var a,o=this.props.dataCategory,i=this.chartDateRange,s=i.chartDateInterval,c=i.chartDateUtc,u=t.intervals.map((function(t){return{date:at(y()(t),s,c),total:0,accepted:0,filtered:0,dropped:{total:0}}})),d=(a={total:0},(0,l.Z)(a,Zt.ACCEPTED,0),(0,l.Z)(a,Zt.FILTERED,0),(0,l.Z)(a,Zt.DROPPED,0),(0,l.Z)(a,Zt.INVALID,0),(0,l.Z)(a,Zt.RATE_LIMITED,0),a);return t.groups.forEach((function(t){var e=t.by,r=e.outcome,n=e.category;o.includes("".concat(n))&&(d.total+=t.totals["sum(quantity)"],d[r]+=t.totals["sum(quantity)"],t.series["sum(quantity)"].forEach((function(t,e){r!==Zt.ACCEPTED&&r!==Zt.FILTERED?u[e].dropped.total+=t:u[e][r]+=t})))})),d[Zt.DROPPED]+=d[Zt.INVALID],d[Zt.DROPPED]+=d[Zt.RATE_LIMITED],u.forEach((function(t){t.total=t.accepted+t.filtered+t.dropped.total,n.accepted.push({value:[t.date,t.accepted]}),n.dropped.push({value:[t.date,t.dropped.total]})})),{cardStats:{total:$(d.total,o,tt(o)),accepted:$(d[Zt.ACCEPTED],o,tt(o)),dropped:$(d[Zt.DROPPED],o,tt(o)),filtered:$(d[Zt.FILTERED],o,tt(o))},chartStats:n}}catch(a){return Dt.$e((function(r){r.setContext("query",e.endpointQuery),r.setContext("body",t),Dt.Tb(a)})),{cardStats:r,chartStats:n,dataError:new Error("Failed to parse stats data")}}}},{key:"renderCards",value:function(){var t=this.props,e=t.dataCategory,r=t.dataCategoryName,n=t.organization,a=this.state.loading,o=this.chartData.cardStats,i=o.total,s=o.accepted,c=o.dropped,l=o.filtered;return[{title:(0,S._N)("Total [dataCategory]",{dataCategory:r}),value:i},{title:(0,S.t)("Accepted"),help:(0,S._N)("Accepted [dataCategory] were successfully processed by Sentry",{dataCategory:e}),value:s,secondaryValue:(0,st.tZ)(Tt,{organization:n,dataCategory:e})},{title:(0,S.t)("Filtered"),help:(0,S._N)("Filtered [dataCategory] were blocked due to your inbound data filter rules",{dataCategory:e}),value:l},{title:(0,S.t)("Dropped"),help:(0,S._N)("Dropped [dataCategory] were discarded due to invalid data, rate-limits, quota limits, or spike protection",{dataCategory:e}),value:c}].map((function(t,e){return(0,st.tZ)(Rt,{title:t.title,score:a?void 0:t.value,help:t.help,trend:t.secondaryValue},e)}))}},{key:"renderChart",value:function(){var t=this.props.dataCategory,e=this.state,r=e.error,n=e.errors,a=e.loading,o=this.chartData,i=o.chartStats,s=o.dataError,c=o.chartDateInterval,l=o.chartDateStart,u=o.chartDateEnd,d=o.chartDateUtc,p=o.chartTransform,h=r||!!s,m=s?wt(wt({},n),{},{data:s}):n;return(0,st.tZ)(jt,{isLoading:a,isError:h,errors:m,title:" ",footer:this.renderChartFooter(),dataCategory:t,dataTransform:p,usageDateStart:l,usageDateEnd:u,usageDateShowUtc:d,usageDateInterval:c,usageStats:i})}},{key:"renderComponent",value:function(){return(0,st.BX)(d.Fragment,{children:[this.renderCards(),(0,st.tZ)(_t,{children:this.renderChart()})]})}}]),p}(Ct.Z);var Rt=(0,u.Z)(Ot.ZP,{target:"e2z08b03"})({name:"14rqsjo",styles:"grid-column:auto/span 1;margin:0"}),_t=(0,u.Z)("div",{target:"e2z08b02"})({name:"18iuzk9",styles:"grid-column:1/-1"}),Lt=(0,u.Z)("div",{target:"e2z08b01"})("display:flex;flex-direction:row;justify-content:space-between;padding:",(0,T.Z)(1)," ",(0,T.Z)(3),";border-top:1px solid ",(function(t){return t.theme.border}),";"),It=(0,u.Z)("div",{target:"e2z08b00"})("display:flex;flex-direction:row;align-items:center;>",M.OT,"{margin-right:",(0,T.Z)(1.5),";}>span:last-child{font-weight:400;font-size:",(function(t){return t.theme.fontSizeMedium}),";}"),zt=(r("../node_modules/core-js/modules/es.number.constructor.js"),r("../node_modules/core-js/modules/es.regexp.exec.js"),r("../node_modules/core-js/modules/es.string.split.js"),r("../node_modules/core-js/modules/es.array.iterator.js"),r("../node_modules/core-js/modules/es.object.to-string.js"),r("../node_modules/core-js/modules/es.set.js"),r("../node_modules/core-js/modules/es.string.iterator.js"),r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/core-js/modules/es.date.to-string.js"),r("../node_modules/core-js/modules/es.regexp.to-string.js"),r("./app/components/gridEditable/sortLink.tsx")),Ut=r("./app/components/pagination.tsx"),Nt=r("./app/components/searchBar.tsx"),Mt=r("./app/utils/withProjects.tsx"),Bt=r("./app/components/charts/errorPanel.tsx"),qt=r("./app/components/idBadge/index.tsx"),Ft=r("./app/components/links/link.tsx"),Xt=r("./app/components/organizations/headerItem.tsx"),Ht=r("./app/components/panels/panelTable.tsx");var Jt=function(t){(0,i.Z)(l,t);var e,r,o=(e=l,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,c.Z)(e);if(r){var a=(0,c.Z)(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return(0,s.Z)(this,t)});function l(){return(0,n.Z)(this,l),o.apply(this,arguments)}return(0,a.Z)(l,[{key:"formatUsageOptions",get:function(){var t=this.props.dataCategory;return{isAbbreviated:t!==P.cn.ATTACHMENTS,useUnitScaling:t===P.cn.ATTACHMENTS}}},{key:"renderTableRow",value:function(t){var e=this.props.dataCategory,r=t.project,n=t.total,a=t.accepted,o=t.filtered,i=t.dropped;return[(0,st.BX)(Wt,{children:[(0,st.tZ)(Ft.Z,{to:t.projectLink,children:(0,st.tZ)(Kt,{avatarSize:16,disableLink:!0,hideOverflow:!0,project:r,displayName:r.slug})}),(0,st.tZ)(Xt.c,{to:t.projectSettingsLink,children:(0,st.tZ)(X.iC,{size:Q.ZP.iconSizes.sm})})]},0),(0,st.tZ)(Yt,{children:$(n,e,this.formatUsageOptions)},1),(0,st.tZ)(Yt,{children:$(a,e,this.formatUsageOptions)},2),(0,st.tZ)(Yt,{children:$(o,e,this.formatUsageOptions)},3),(0,st.tZ)(Yt,{children:$(i,e,this.formatUsageOptions)},4)]}},{key:"render",value:function(){var t=this,e=this.props,r=e.isEmpty,n=e.isLoading,a=e.isError,o=e.errors,i=e.headers,s=e.usageStats;return a?(0,st.tZ)(D.s_,{children:(0,st.BX)(Bt.Z,{height:"256px",children:[(0,st.tZ)(X.FC,{color:"gray300",size:"lg"}),(0,st.tZ)($t,{children:o&&Object.keys(o).map((function(t){var e;return(0,st.tZ)("span",{children:null===(e=o[t])||void 0===e?void 0:e.message},t)}))})]})}):(0,st.tZ)(Gt,{isLoading:n,isEmpty:r,headers:i,children:s.map((function(e){return t.renderTableRow(e)}))})}}]),l}(d.Component);Jt.displayName="UsageTable";const Qt=Jt;var Vt,Gt=(0,u.Z)(Ht.Z,{target:"e5qzo7m5"})("grid-template-columns:repeat(5, auto);@media (min-width: ",(function(t){return t.theme.breakpoints[0]}),"){grid-template-columns:auto repeat(4, 100px);}"),Yt=(0,u.Z)("div",{target:"e5qzo7m4"})({name:"1xis4j3",styles:"flex-shrink:1;text-align:right"}),Wt=(0,u.Z)(Yt,{target:"e5qzo7m3"})({name:"1axuxrw",styles:"display:flex;align-items:center;text-align:left"}),Kt=(0,u.Z)(qt.Z,{target:"e5qzo7m1"})({name:"ri00hy",styles:"overflow:hidden;white-space:nowrap;flex-shrink:1"}),$t=(0,u.Z)("div",{target:"e5qzo7m0"})("display:flex;flex-direction:column;margin-top:",(0,T.Z)(1),";font-size:",(function(t){return t.theme.fontSizeSmall}),";");function te(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ee(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?te(Object(r),!0).forEach((function(e){(0,l.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):te(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}!function(t){t.PROJECT="project",t.TOTAL="total",t.ACCEPTED="accepted",t.FILTERED="filtered",t.DROPPED="dropped",t.INVALID="invalid",t.RATE_LIMITED="rate_limited"}(Vt||(Vt={}));var re=function(t){(0,i.Z)(p,t);var e,r,u=(e=p,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,c.Z)(e);if(r){var a=(0,c.Z)(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return(0,s.Z)(this,t)});function p(){var t;(0,n.Z)(this,p);for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return t=u.call.apply(u,[this].concat(r)),(0,l.Z)((0,o.Z)(t),"handleChangeSort",(function(e){var r=t.props.handleChangeState,n=t.tableSort,a=n.key,o=n.direction,i=1;return a===e?i=-1*o:e===Vt.PROJECT&&(i=-1),r({sort:"".concat(i>0?"-":"").concat(e)},{willUpdateRouter:!1})})),(0,l.Z)((0,o.Z)(t),"handleSearch",(function(e){var r=t.props,n=r.handleChangeState;e!==r.tableQuery&&n(e?{query:e,cursor:void 0}:{query:void 0,cursor:void 0})})),t}return(0,a.Z)(p,[{key:"componentDidUpdate",value:function(t){var e=t.dataDatetime,r=t.dataCategory,n=this.props,a=n.dataDatetime,o=n.dataCategory;e.start===a.start&&e.end===a.end&&e.period===a.period&&e.utc===a.utc&&o===r||this.reloadData()}},{key:"getEndpoints",value:function(){return[["projectStats",this.endpointPath,{query:this.endpointQuery}]]}},{key:"endpointPath",get:function(){var t=this.props.organization;return"/organizations/".concat(t.slug,"/stats_v2/")}},{key:"endpointQuery",get:function(){var t=this.props,e=t.dataDatetime,r=t.dataCategory;return ee(ee({},e.start&&e.end?{start:e.start,end:e.end,utc:e.utc}:{statsPeriod:e.period||E.GY}),{},{interval:"1d",groupBy:["outcome","project"],field:["sum(quantity)"],project:"-1",category:r.slice(0,-1)})}},{key:"tableData",get:function(){var t=this.state.projectStats;return ee({headers:this.tableHeader},this.mapSeriesToTable(t))}},{key:"tableSort",get:function(){var t=this.props.tableSort;if(!t)return{key:Vt.TOTAL,direction:1};var e=t,r=-1;switch("-"===t.charAt(0)&&(e=e.slice(1),r=1),e){case Vt.PROJECT:case Vt.TOTAL:case Vt.ACCEPTED:case Vt.FILTERED:case Vt.DROPPED:return{key:e,direction:r};default:return{key:Vt.ACCEPTED,direction:-1}}}},{key:"tableCursor",get:function(){var t=this.props.tableCursor,e=Number(null==t?void 0:t.split(":")[1]);return isNaN(e)?0:e}},{key:"pageLink",get:function(){var t=this.filteredProjects.length,e=this.tableCursor,r=e-p.MAX_ROWS_USAGE_TABLE,n=e+p.MAX_ROWS_USAGE_TABLE;return'<link>; rel="previous"; results="'.concat(r>=0,'"; cursor="0:').concat(Math.max(0,r),':1", <link>; rel="next"; results="').concat(n<t,'"; cursor="0:').concat(n,':0"')}},{key:"filteredProjects",get:function(){var t=this.props,e=t.projects,r=t.tableQuery;return r?e.filter((function(t){return t.slug.includes(r)&&t.hasAccess})):e.filter((function(t){return t.hasAccess}))}},{key:"tableHeader",get:function(){var t=this,e=this.tableSort,r=e.key,n=e.direction,a=function(t){if(t===r)return n>0?"desc":"asc"};return[{key:Vt.PROJECT,title:(0,S.t)("Project"),align:"left",direction:a(Vt.PROJECT),onClick:function(){return t.handleChangeSort(Vt.PROJECT)}},{key:Vt.TOTAL,title:(0,S.t)("Total"),align:"right",direction:a(Vt.TOTAL),onClick:function(){return t.handleChangeSort(Vt.TOTAL)}},{key:Vt.ACCEPTED,title:(0,S.t)("Accepted"),align:"right",direction:a(Vt.ACCEPTED),onClick:function(){return t.handleChangeSort(Vt.ACCEPTED)}},{key:Vt.FILTERED,title:(0,S.t)("Filtered"),align:"right",direction:a(Vt.FILTERED),onClick:function(){return t.handleChangeSort(Vt.FILTERED)}},{key:Vt.DROPPED,title:(0,S.t)("Dropped"),align:"right",direction:a(Vt.DROPPED),onClick:function(){return t.handleChangeSort(Vt.DROPPED)}}].map((function(t){var e=t.key===Vt.PROJECT?Wt:Yt;return(0,st.tZ)(e,{children:(0,st.tZ)(zt.Z,{canSort:!0,title:t.title,align:t.align,direction:t.direction,generateSortLink:t.onClick})},t.key)}))}},{key:"getProjectLink",value:function(t){var e=this.props,r=e.dataCategory,n=e.getNextLocations,a=e.organization,o=n(t),i=o.performance,s=o.projectDetail,c=o.settings;return r===P.cn.TRANSACTIONS&&a.features.includes("performance-view")?{projectLink:i,projectSettingsLink:c}:{projectLink:s,projectSettingsLink:c}}},{key:"mapSeriesToTable",value:function(t){var e=this;if(!t)return{tableStats:[]};var r={};try{var n,a=(n={},(0,l.Z)(n,Vt.TOTAL,0),(0,l.Z)(n,Vt.ACCEPTED,0),(0,l.Z)(n,Vt.FILTERED,0),(0,l.Z)(n,Vt.DROPPED,0),n),o=this.filteredProjects,i=new Set(o.map((function(t){return t.id})));t.groups.forEach((function(t){var e=t.by,n=e.outcome,o=e.project;i.has(o.toString())&&(r[o]||(r[o]=ee({},a)),r[o].total+=t.totals["sum(quantity)"],n===Vt.ACCEPTED||n===Vt.FILTERED||n===Vt.DROPPED?r[o][n]+=t.totals["sum(quantity)"]:r[o][Vt.DROPPED]+=t.totals["sum(quantity)"])}));var s=o.map((function(t){var n,o=null!==(n=r[t.id])&&void 0!==n?n:ee({},a);return ee(ee({project:ee({},t)},e.getProjectLink(t)),o)})),c=this.tableSort,u=c.key,d=c.direction;s.sort((function(t,e){return u===Vt.PROJECT?e.project.slug.localeCompare(t.project.slug)*d:t[u]!==e[u]?(e[u]-t[u])*d:t.project.slug.localeCompare(e.project.slug)}));var h=this.tableCursor;return{tableStats:s.slice(h,h+p.MAX_ROWS_USAGE_TABLE)}}catch(r){return Dt.$e((function(n){n.setContext("query",e.endpointQuery),n.setContext("body",t),Dt.Tb(r)})),{tableStats:[],error:r}}}},{key:"renderComponent",value:function(){var t=this.state,e=t.error,r=t.errors,n=t.loading,a=this.props,o=a.dataCategory,i=a.loadingProjects,s=a.tableQuery,c=this.tableData,l=c.headers,u=c.tableStats;return(0,st.BX)(d.Fragment,{children:[(0,st.tZ)(ae,{children:(0,st.tZ)(Nt.Z,{defaultQuery:"",query:s,placeholder:(0,S.t)("Filter your projects"),onSearch:this.handleSearch})}),(0,st.BX)(ae,{children:[(0,st.tZ)(Qt,{isLoading:n||i,isError:e,errors:r,isEmpty:0===u.length,headers:l,dataCategory:o,usageStats:u}),(0,st.tZ)(Ut.Z,{pageLinks:this.pageLink})]})]})}}]),p}(Ct.Z);(0,l.Z)(re,"MAX_ROWS_USAGE_TABLE",25);const ne=(0,Mt.Z)(re);var ae=(0,u.Z)("div",{target:"e1ii6wy90"})({name:"18iuzk9",styles:"grid-column:1/-1"});function oe(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ie(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?oe(Object(r),!0).forEach((function(e){(0,l.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):oe(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var se=["pageStatsPeriod","pageStart","pageEnd","pageUtc","dataCategory","transform","sort","query","cursor"],ce=function(t){(0,i.Z)(p,t);var e,r,u=(e=p,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,c.Z)(e);if(r){var a=(0,c.Z)(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return(0,s.Z)(this,t)});function p(){var t;(0,n.Z)(this,p);for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return t=u.call.apply(u,[this].concat(r)),(0,l.Z)((0,o.Z)(t),"state",{isCalendarOpen:!1}),(0,l.Z)((0,o.Z)(t),"getNextLocations",(function(e){var r=t.props,n=r.location,a=r.organization,o=ie(ie({},n),{},{query:ie(ie({},n.query),{},{project:e.id})});return o.query=h()(o.query,se),{performance:ie(ie({},o),{},{pathname:"/organizations/".concat(a.slug,"/performance/")}),projectDetail:ie(ie({},o),{},{pathname:"/organizations/".concat(a.slug,"/projects/").concat(e.slug,"/")}),issueList:ie(ie({},o),{},{pathname:"/organizations/".concat(a.slug,"/issues/")}),settings:{pathname:"/settings/".concat(a.slug,"/projects/").concat(e.slug,"/")}}})),(0,l.Z)((0,o.Z)(t),"handleUpdateDatetime",(function(e){var r=e.start,n=e.end,a=e.relative,o=e.utc;if(r&&n){var i=o?y().utc:y();return t.setStateOnUrl({pageStatsPeriod:void 0,pageStart:i(r).format(),pageEnd:i(n).format(),pageUtc:null!=o?o:void 0})}return t.setStateOnUrl({pageStatsPeriod:a||void 0,pageStart:void 0,pageEnd:void 0,pageUtc:void 0})})),(0,l.Z)((0,o.Z)(t),"setStateOnUrl",(function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{willUpdateRouter:!0},n=t.props,a=n.location,o=n.router,i=f()(e,se),s=ie(ie({},a),{},{query:ie(ie({},null==a?void 0:a.query),i)});return r.willUpdateRouter&&o.push(s),s})),(0,l.Z)((0,o.Z)(t),"renderPageControl",(function(){var e=t.props.organization,r=t.state.isCalendarOpen,n=t.dataDatetime,a=n.start,o=n.end,i=n.period,s=n.utc;return(0,st.BX)(d.Fragment,{children:[(0,st.tZ)(pe,{isCalendarOpen:r,children:(0,st.tZ)(Z.Z,{organization:e,relative:null!=i?i:"",start:null!=a?a:null,end:null!=o?o:null,utc:null!=s?s:null,label:(0,st.tZ)(he,{children:(0,S.t)("Date Range:")}),onChange:function(){},onUpdate:t.handleUpdateDatetime,onToggleSelector:function(e){return t.setState({isCalendarOpen:e})},relativeOptions:h()(E.wh,["1h"]),defaultPeriod:E.GY})}),(0,st.tZ)(de,{label:(0,st.BX)(he,{children:[(0,st.tZ)("span",{children:(0,S.t)("Event Type: ")}),(0,st.tZ)("span",{children:t.dataCategoryName})]}),children:gt.map((function(e){return(0,st.tZ)(v.hP,{eventKey:e.value,onSelect:function(e){return t.setStateOnUrl({dataCategory:e})},children:e.label},e.value)}))})]})})),t}return(0,a.Z)(p,[{key:"dataCategory",get:function(){var t,e,r=null===(t=this.props.location)||void 0===t||null===(e=t.query)||void 0===e?void 0:e.dataCategory;switch(r){case P.cn.ERRORS:case P.cn.TRANSACTIONS:case P.cn.ATTACHMENTS:return r;default:return P.cn.ERRORS}}},{key:"dataCategoryName",get:function(){var t,e=this.dataCategory;return null!==(t=P.mL[e])&&void 0!==t?t:(0,S.t)("Unknown Data Category")}},{key:"dataDatetime",get:function(){var t,e,r=null!==(t=null===(e=this.props.location)||void 0===e?void 0:e.query)&&void 0!==t?t:{},n=(0,j.Q)(r,{allowEmptyPeriod:!0,allowAbsoluteDatetime:!0,allowAbsolutePageDatetime:!0}),a=n.start,o=n.end,i=n.statsPeriod,s=n.utc;if(!i&&!a&&!o)return{period:E.GY};if(i)return{period:i};var c="true"===s;return a&&o?c?{start:y().utc(a).format(),end:y().utc(o).format(),utc:c}:{start:y()(a).utc().format(),end:y()(o).utc().format(),utc:c}:{period:E.GY}}},{key:"chartTransform",get:function(){var t,e;return null===(t=this.props.location)||void 0===t||null===(e=t.query)||void 0===e?void 0:e.transform}},{key:"tableSort",get:function(){var t,e;return null===(t=this.props.location)||void 0===t||null===(e=t.query)||void 0===e?void 0:e.sort}},{key:"tableQuery",get:function(){var t,e;return null===(t=this.props.location)||void 0===t||null===(e=t.query)||void 0===e?void 0:e.query}},{key:"tableCursor",get:function(){var t,e;return null===(t=this.props.location)||void 0===t||null===(e=t.query)||void 0===e?void 0:e.cursor}},{key:"render",value:function(){var t=this.props.organization;return(0,st.tZ)(C.Z,{title:"Usage Stats",children:(0,st.BX)(O.JH,{children:[(0,st.tZ)(O.mr,{children:(0,st.tZ)(x.Z,{children:(0,S.t)("Organization Usage Stats")})}),(0,st.tZ)("p",{children:(0,S.t)("We collect usage metrics on three types of events: errors, transactions, and attachments. The charts below reflect events that Sentry has received across your entire organization. You can also find them broken down by project in the table.")}),(0,st.BX)(ue,{children:[this.renderPageControl(),(0,st.tZ)(b.Z,{mini:!0,children:(0,st.tZ)(At,{organization:t,dataCategory:this.dataCategory,dataCategoryName:this.dataCategoryName,dataDatetime:this.dataDatetime,chartTransform:this.chartTransform,handleChangeState:this.setStateOnUrl})}),(0,st.tZ)(b.Z,{mini:!0,children:(0,st.tZ)(ne,{organization:t,dataCategory:this.dataCategory,dataCategoryName:this.dataCategoryName,dataDatetime:this.dataDatetime,tableSort:this.tableSort,tableQuery:this.tableQuery,tableCursor:this.tableCursor,handleChangeState:this.setStateOnUrl,getNextLocations:this.getNextLocations})})]})]})})}}]),p}(d.Component);ce.displayName="OrganizationStats";const le=(0,k.Z)(ce);var ue=(0,u.Z)("div",{target:"eonnbv93"})("display:grid;grid-template-columns:1fr;grid-gap:",(0,T.Z)(2),";@media (min-width: ",(function(t){return t.theme.breakpoints[0]}),"){grid-template-columns:repeat(2, 1fr);}@media (min-width: ",(function(t){return t.theme.breakpoints[2]}),"){grid-template-columns:repeat(4, 1fr);}"),de=(0,u.Z)(v.ZP,{target:"eonnbv92"})("height:42px;grid-column:auto/span 1;justify-self:stretch;align-self:stretch;button{width:100%;height:100%;>span{display:flex;justify-content:space-between;}}@media (min-width: ",(function(t){return t.theme.breakpoints[0]}),"){grid-column:auto/span 2;}@media (min-width: ",(function(t){return t.theme.breakpoints[2]}),"){grid-column:auto/span 1;}"),pe=(0,u.Z)(D.s_,{target:"eonnbv91"})("grid-column:auto/span 1;display:flex;justify-content:center;align-items:center;height:42px;background:",(function(t){return t.theme.background}),";border:1px solid ",(function(t){return t.theme.border}),";border-radius:",(function(t){return t.isCalendarOpen?"".concat(t.theme.borderRadius," ").concat(t.theme.borderRadius," 0 0"):t.theme.borderRadius}),";padding:0;margin:0;font-size:",(function(t){return t.theme.fontSizeMedium}),";color:",(function(t){return t.theme.textColor}),";z-index:",(function(t){return t.theme.zIndex.globalSelectionHeader}),";>div{width:100%;align-self:stretch;}>div>div:first-child{padding:0 ",(0,T.Z)(2),";}>div>div:last-child{box-sizing:content-box;font-size:1em;}@media (min-width: ",(function(t){return t.theme.breakpoints[0]}),"){grid-column:auto/span 2;}@media (min-width: ",(function(t){return t.theme.breakpoints[2]}),"){grid-column:auto/span 3;}"),he=(0,u.Z)("span",{target:"eonnbv90"})("text-align:left;font-weight:600;color:",(function(t){return t.theme.textColor}),";>span:last-child{font-weight:400;}")}}]);
//# sourceMappingURL=OrganizationStats.js.map