{"version":3,"sources":["webpack:///../node_modules/@babel/runtime/helpers/esm/get.js","webpack:///../node_modules/@babel/runtime/helpers/esm/superPropBase.js","webpack:///./app/components/modals/recoveryOptionsModal.tsx"],"names":["_get","target","property","receiver","Reflect","get","base","object","Object","prototype","hasOwnProperty","call","getPrototypeOf","desc","getOwnPropertyDescriptor","value","setState","skipSms","this","props","authenticatorName","closeModal","Body","Header","Footer","state","authenticators","reduce","obj","item","id","recovery","sms","recoveryEnrolled","isEnrolled","displaySmsPrompt","Fragment","closeButton","t","type","onClick","handleSkipSms","name","autoFocus","priority","to","css","marginLeft","space","authId","AsyncComponent"],"mappings":"wQACe,SAASA,EAAKC,EAAQC,EAAUC,GAiB7C,OAfEH,EADqB,oBAAZI,SAA2BA,QAAQC,IACrCD,QAAQC,IAER,SAAcJ,EAAQC,EAAUC,GACrC,IAAIG,ECLK,SAAwBC,EAAQL,GAC7C,MAAQM,OAAOC,UAAUC,eAAeC,KAAKJ,EAAQL,IAEpC,QADfK,GAAS,EAAAK,EAAA,GAAeL,MAI1B,OAAOA,EDDQ,CAAcN,EAAQC,GACjC,GAAKI,EAAL,CACA,IAAIO,EAAOL,OAAOM,yBAAyBR,EAAMJ,GAEjD,OAAIW,EAAKR,IACAQ,EAAKR,IAAIM,KAAKR,GAGhBU,EAAKE,SAIJd,EAAQC,EAAUC,GAAYF,K,+2EEkG5C,Q,ioBAtFkB,WACd,EAAKe,SAAS,CAACC,SAAS,O,gDAT1B,WACE,mFAAoCA,SAAS,M,0BAG/C,WACE,MAAO,CAAC,CAAC,iBAAkB,gC,wBAO7B,WAAa,MACmDC,KAAKC,MAA5DC,EADI,EACJA,kBAAmBC,EADf,EACeA,WAAYC,EAD3B,EAC2BA,KAAMC,EADjC,EACiCA,OAAQC,EADzC,EACyCA,OADzC,EAEuBN,KAAKO,MAAhCC,EAFI,EAEJA,eAAgBT,EAFZ,EAEYA,QAFZ,EAIaS,EAAgBC,QACtC,SAACC,EAAKC,GAEJ,OADAD,EAAIC,EAAKC,IAAMD,EACRD,IAET,IALKG,EAJI,EAIJA,SAAUC,EAJN,EAIMA,IAOXC,EAAmBF,GAAYA,EAASG,WACxCC,EAAmBH,IAAQA,EAAIE,aAAejB,EAEpD,OACE,QAAC,EAAAmB,SAAD,YACE,QAACb,EAAD,CAAQc,aAAW,EAAnB,UAAqBC,OAAE,wCAEvB,QAAChB,EAAD,YACE,QAAC,IAAD,WACGgB,OAAE,qDAAsDlB,MAE3D,QAAC,IAAD,WACGkB,OAAE,oEAGJH,GAEC,QAAC,IAAD,CAAOI,KAAK,UAAZ,UACGD,OAAE,iEAIL,QAAC,IAAD,CAAOC,KAAK,UAAZ,UACGD,OAAE,8JAQRH,GAEC,QAACX,EAAD,YACE,QAAC,KAAD,CAAQgB,QAAStB,KAAKuB,cAAeC,KAAK,WAAWC,WAAS,EAA9D,UACGL,OAAE,qBAEL,QAAC,KAAD,CACEM,SAAS,UACTJ,QAASnB,EACTwB,GAAE,yCAAoCb,EAAIF,GAAxC,YACFY,KAAK,WACLI,KAAG,QAAE,CAACC,YAAYC,OAAM,IAArB,OACHL,WAAS,EANX,UAQGL,OAAE,4BAKP,QAACd,EAAD,WACE,QAAC,KAAD,CACEoB,SAAS,UACTJ,QAASnB,EACTwB,GACEZ,EAAgB,yCACsBF,EAASkB,OAD/B,KAEZ,8BAENP,KAAK,WACLC,WAAS,EATX,UAWGL,OAAE,iC,GAtFkBY","file":"app_components_modals_recoveryOptionsModal_tsx.a1a8585dc2b3ea3979d6.js","sourcesContent":["import superPropBase from \"./superPropBase.js\";\nexport default function _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nexport default function _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}","import {Fragment} from 'react';\n\nimport {ModalRenderProps} from 'app/actionCreators/modal';\nimport Alert from 'app/components/alert';\nimport AsyncComponent from 'app/components/asyncComponent';\nimport Button from 'app/components/button';\nimport {t} from 'app/locale';\nimport space from 'app/styles/space';\nimport {Authenticator} from 'app/types';\nimport TextBlock from 'app/views/settings/components/text/textBlock';\n\ntype Props = AsyncComponent['props'] &\n  ModalRenderProps & {\n    authenticatorName: string;\n  };\n\ntype State = AsyncComponent['state'] & {\n  authenticators: Authenticator[] | null;\n  skipSms: boolean;\n};\n\nclass RecoveryOptionsModal extends AsyncComponent<Props, State> {\n  getDefaultState() {\n    return {...super.getDefaultState(), skipSms: false};\n  }\n\n  getEndpoints(): ReturnType<AsyncComponent['getEndpoints']> {\n    return [['authenticators', '/users/me/authenticators/']];\n  }\n\n  handleSkipSms = () => {\n    this.setState({skipSms: true});\n  };\n\n  renderBody() {\n    const {authenticatorName, closeModal, Body, Header, Footer} = this.props;\n    const {authenticators, skipSms} = this.state;\n\n    const {recovery, sms} = authenticators!.reduce<{[key: string]: Authenticator}>(\n      (obj, item) => {\n        obj[item.id] = item;\n        return obj;\n      },\n      {}\n    );\n    const recoveryEnrolled = recovery && recovery.isEnrolled;\n    const displaySmsPrompt = sms && !sms.isEnrolled && !skipSms;\n\n    return (\n      <Fragment>\n        <Header closeButton>{t('Two-Factor Authentication Enabled')}</Header>\n\n        <Body>\n          <TextBlock>\n            {t('Two-factor authentication via %s has been enabled.', authenticatorName)}\n          </TextBlock>\n          <TextBlock>\n            {t('You should now set up recovery options to secure your account.')}\n          </TextBlock>\n\n          {displaySmsPrompt ? (\n            // set up backup phone number\n            <Alert type=\"warning\">\n              {t('We recommend adding a phone number as a backup 2FA method.')}\n            </Alert>\n          ) : (\n            // get recovery codes\n            <Alert type=\"warning\">\n              {t(\n                `Recovery codes are the only way to access your account if you lose\n                  your device and cannot receive two-factor authentication codes.`\n              )}\n            </Alert>\n          )}\n        </Body>\n\n        {displaySmsPrompt ? (\n          // set up backup phone number\n          <Footer>\n            <Button onClick={this.handleSkipSms} name=\"skipStep\" autoFocus>\n              {t('Skip this step')}\n            </Button>\n            <Button\n              priority=\"primary\"\n              onClick={closeModal}\n              to={`/settings/account/security/mfa/${sms.id}/enroll/`}\n              name=\"addPhone\"\n              css={{marginLeft: space(1)}}\n              autoFocus\n            >\n              {t('Add a Phone Number')}\n            </Button>\n          </Footer>\n        ) : (\n          // get recovery codes\n          <Footer>\n            <Button\n              priority=\"primary\"\n              onClick={closeModal}\n              to={\n                recoveryEnrolled\n                  ? `/settings/account/security/mfa/${recovery.authId}/`\n                  : '/settings/account/security/'\n              }\n              name=\"getCodes\"\n              autoFocus\n            >\n              {t('Get Recovery Codes')}\n            </Button>\n          </Footer>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nexport default RecoveryOptionsModal;\n"],"sourceRoot":""}