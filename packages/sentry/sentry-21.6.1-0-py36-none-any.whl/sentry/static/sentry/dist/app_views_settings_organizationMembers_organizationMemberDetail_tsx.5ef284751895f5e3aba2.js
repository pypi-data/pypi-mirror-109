(self.webpackChunk=self.webpackChunk||[]).push([["app_views_settings_organizationMembers_organizationMemberDetail_tsx"],{"./app/utils/isMemberDisabledFromLimit.tsx":(e,t,r)=>{"use strict";function n(e){var t;return null!==(t=null==e?void 0:e.flags["member-limit:restricted"])&&void 0!==t&&t}r.d(t,{Z:()=>n}),r("../node_modules/core-js/modules/es.regexp.flags.js")},"./app/utils/recreateRoute.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>i}),r("../node_modules/core-js/modules/es.array.map.js"),r("../node_modules/core-js/modules/es.array.index-of.js"),r("../node_modules/core-js/modules/es.array.slice.js"),r("../node_modules/core-js/modules/es.regexp.exec.js"),r("../node_modules/core-js/modules/es.string.search.js"),r("../node_modules/core-js/modules/es.array.concat.js"),r("../node_modules/core-js/modules/es.array.join.js");var n=r("../node_modules/lodash/findLastIndex.js"),s=r.n(n),o=r("./app/utils/replaceRouterParams.tsx");function i(e,t){var r,n,i,a,l=t.routes,c=t.params,d=t.location,u=t.stepBack,m=l.map((function(e){return e.path||""}));"string"!=typeof e?(a=l.indexOf(e)+1,i=s()(m.slice(0,a),(function(e){return"/"===e[0]}))):i=s()(m,(function(e){return"/"===e[0]}));var p=m.slice(i,a);void 0!==u&&(p=p.slice(0,u));var h=null!==(r=null==d?void 0:d.search)&&void 0!==r?r:"",f=null!==(n=null==d?void 0:d.hash)&&void 0!==n?n:"",b="".concat(p.join("")).concat("string"!=typeof e?"":e).concat(h).concat(f);return(0,o.Z)(b,c)}},"./app/views/settings/organizationMembers/organizationMemberDetail.tsx":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>ee}),r("../node_modules/core-js/modules/es.reflect.construct.js"),r("../node_modules/core-js/modules/es.object.keys.js"),r("../node_modules/core-js/modules/es.symbol.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),r("../node_modules/core-js/modules/es.array.for-each.js"),r("../node_modules/core-js/modules/web.dom-collections.for-each.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),r("../node_modules/core-js/modules/es.object.define-properties.js"),r("../node_modules/core-js/modules/es.object.define-property.js");var n=r("../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),s=r("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),o=r("../node_modules/@babel/runtime/helpers/esm/createClass.js"),i=r("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),a=r("../node_modules/@babel/runtime/helpers/esm/get.js"),l=r("../node_modules/@babel/runtime/helpers/esm/inherits.js"),c=r("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),d=r("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),u=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),m=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),p=r("../node_modules/@babel/runtime/regenerator/index.js"),h=r.n(p),f=(r("../node_modules/core-js/modules/es.array.concat.js"),r("../node_modules/core-js/modules/es.array.includes.js"),r("../node_modules/core-js/modules/es.string.includes.js"),r("../node_modules/core-js/modules/es.array.filter.js"),r("../node_modules/core-js/modules/es.array.map.js"),r("../node_modules/core-js/modules/es.array.iterator.js"),r("../node_modules/core-js/modules/es.object.to-string.js"),r("../node_modules/core-js/modules/es.promise.js"),r("../node_modules/core-js/modules/es.string.iterator.js"),r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/core-js/modules/es.function.name.js"),r("../node_modules/react/index.js")),b=r("../node_modules/react-router/es/index.js"),v=r("../node_modules/@sentry/minimal/esm/index.js"),g=r("./app/actionCreators/account.tsx"),Z=r("./app/actionCreators/indicator.tsx"),j=r("./app/actionCreators/members.tsx"),y=r("./app/components/autoSelectText.tsx"),x=r("./app/components/button.tsx"),w=r("./app/components/confirm.tsx"),_=r("./app/components/dateTime.tsx"),k=r("./app/components/errors/notFound.tsx"),R=r("./app/components/hookOrDefault.tsx"),S=r("./app/components/links/externalLink.tsx"),B=r("./app/components/panels/index.tsx"),O=r("./app/components/tooltip.tsx"),C=r("./app/locale.tsx"),P=r("./app/styles/input.tsx"),z=r("./app/styles/space.tsx"),I=r("./app/utils/isMemberDisabledFromLimit.tsx"),T=r("./app/utils/recreateRoute.tsx"),D=r("./app/utils/withOrganization.tsx"),X=r("./app/views/asyncView.tsx"),A=r("./app/views/settings/components/forms/field/index.tsx"),M=r("./app/views/settings/components/settingsPageHeader.tsx"),N=r("./app/views/settings/components/teamSelect.tsx"),L=r("./app/components/radio.tsx"),E=r("./app/views/settings/components/text/textBlock.tsx"),F=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");var q=(0,m.Z)("label",{target:"eh6xwcb0"})({name:"ddvan8",styles:"display:flex;flex:1;align-items:center;margin-bottom:0"}),V=function(e){(0,l.Z)(i,e);var t,r,n=(t=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,d.Z)(t);if(r){var s=(0,d.Z)(this).constructor;e=Reflect.construct(n,arguments,s)}else e=n.apply(this,arguments);return(0,c.Z)(this,e)});function i(){return(0,s.Z)(this,i),n.apply(this,arguments)}return(0,o.Z)(i,[{key:"render",value:function(){var e=this,t=this.props,r=t.disabled,n=t.enforceAllowed,s=t.roleList,o=t.selectedRole;return(0,F.BX)(B.s_,{children:[(0,F.tZ)(B.V9,{children:(0,C.t)("Role")}),(0,F.tZ)(B.N,{children:s.map((function(t){var s=t.desc,i=t.name,a=t.id,l=t.allowed,c=r||n&&!l;return(0,F.tZ)(B.Lv,{onClick:function(){return!c&&e.props.setRole(a)},css:c?{color:"grey",cursor:"default"}:{},children:(0,F.BX)(q,{children:[(0,F.tZ)(L.Z,{id:a,value:i,checked:a===o,readOnly:!0}),(0,F.BX)("div",{style:{flex:1,padding:"0 16px"},children:[i,(0,F.tZ)(E.Z,{noMargin:!0,children:(0,F.tZ)("div",{className:"help-block",children:s})})]})]})},a)}))})]})}}]),i}(f.Component);V.displayName="RoleSelect";const H=V;function G(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function J(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?G(Object(r),!0).forEach((function(t){(0,u.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Y=(0,C.t)("Cannot be reset since user is in more than one organization"),K=(0,C.t)("Not enrolled in two-factor authentication"),Q=(0,C.t)("You do not have permission to perform this action"),U=(0,C.t)("Cannot be reset since two-factor is required for this organization"),W=(0,R.Z)({hookName:"component:disabled-member-tooltip",defaultComponent:function(e){var t=e.children;return(0,F.tZ)(f.Fragment,{children:t})}}),$=function(e){(0,l.Z)(p,e);var t,r,m=(t=p,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,d.Z)(t);if(r){var s=(0,d.Z)(this).constructor;e=Reflect.construct(n,arguments,s)}else e=n.apply(this,arguments);return(0,c.Z)(this,e)});function p(){var e;(0,s.Z)(this,p);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return e=m.call.apply(m,[this].concat(r)),(0,u.Z)((0,i.Z)(e),"handleSave",(0,n.Z)(h().mark((function t(){var r,n,s,o;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,n=r.organization,s=r.params,(0,Z.E3)((0,C.t)("Saving...")),e.setState({busy:!0}),t.prev=3,t.next=6,(0,j.hS)(e.api,{orgId:n.slug,memberId:s.memberId,data:e.state.member});case 6:(0,Z.S9)((0,C.t)("Saved")),e.redirectToMemberPage(),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(3),o=t.t0&&t.t0.responseJSON&&t.t0.responseJSON.detail||(0,C.t)("Could not save..."),(0,Z.Iw)(o);case 14:e.setState({busy:!1});case 15:case"end":return t.stop()}}),t,null,[[3,10]])})))),(0,u.Z)((0,i.Z)(e),"handleInvite",function(){var t=(0,n.Z)(h().mark((function t(r){var n,s,o,i;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,s=n.organization,o=n.params,(0,Z.E3)((0,C.t)("Sending invite...")),e.setState({busy:!0}),t.prev=3,t.next=6,(0,j.R_)(e.api,{orgId:s.slug,memberId:o.memberId,regenerate:r});case 6:i=t.sent,(0,Z.S9)((0,C.t)("Sent invite!")),r&&e.setState((function(e){return{member:J(J({},e.member),i)}})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),(0,Z.Iw)((0,C.t)("Could not send invite"));case 14:e.setState({busy:!1});case 15:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(e){return t.apply(this,arguments)}}()),(0,u.Z)((0,i.Z)(e),"handleAddTeam",(function(t){var r=e.state.member;r.teams.includes(t.slug)||r.teams.push(t.slug),e.setState({member:r})})),(0,u.Z)((0,i.Z)(e),"handleRemoveTeam",(function(t){var r=e.state.member;e.setState({member:J(J({},r),{},{teams:r.teams.filter((function(e){return e!==t}))})})})),(0,u.Z)((0,i.Z)(e),"handle2faReset",(0,n.Z)(h().mark((function t(){var r,n,s,o,i,a;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,n=r.organization,s=r.router,o=e.state.member,i=o.user,a=i.authenticators.map((function(t){return(0,g.Hb)(e.api,i.id,t.id)})),t.prev=3,t.next=6,Promise.all(a);case 6:s.push("/settings/".concat(n.slug,"/members/")),(0,Z.S9)((0,C.t)("All authenticators have been removed")),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(3),(0,Z.Iw)((0,C.t)("Error removing authenticators")),v.Tb(t.t0);case 14:case"end":return t.stop()}}),t,null,[[3,10]])})))),(0,u.Z)((0,i.Z)(e),"showResetButton",(function(){var t=e.props.organization,r=e.state.member.user;return!(!r||!r.authenticators||t.require2FA)&&r.authenticators.length>=1&&r.canReset2fa})),(0,u.Z)((0,i.Z)(e),"getTooltip",(function(){var t=e.props.organization,r=e.state.member.user;return r?r.authenticators?r.authenticators.length?r.canReset2fa?t.require2FA?U:"":Y:K:Q:""})),e}return(0,o.Z)(p,[{key:"getDefaultState",value:function(){return J(J({},(0,a.Z)((0,d.Z)(p.prototype),"getDefaultState",this).call(this)),{},{roleList:[],selectedRole:"",member:null})}},{key:"getEndpoints",value:function(){var e=this.props,t=e.organization,r=e.params;return[["member","/organizations/".concat(t.slug,"/members/").concat(r.memberId,"/")]]}},{key:"redirectToMemberPage",value:function(){var e=this.props,t=e.location,r=e.params,n=e.routes,s=(0,T.Z)("members/",{location:t,routes:n,params:r,stepBack:-2});b.browserHistory.push(s)}},{key:"memberDeactivated",get:function(){return(0,I.Z)(this.state.member)}},{key:"renderMemberStatus",value:function(e){return this.memberDeactivated?(0,F.tZ)("em",{children:(0,F.tZ)(W,{children:(0,C.t)("Deactivated")})}):e.expired?(0,F.tZ)("em",{children:(0,C.t)("Invitation Expired")}):e.pending?(0,F.tZ)("em",{children:(0,C.t)("Invitation Pending")}):(0,C.t)("Active")}},{key:"renderBody",value:function(){var e=this,t=this.props.organization,r=this.state.member;if(!r)return(0,F.tZ)(k.Z,{});var n=t.access,s=r.invite_link,o=n.includes("org:write")&&!this.memberDeactivated,i=r.email,a=!r.expired,l=!r.pending;return(0,F.BX)(f.Fragment,{children:[(0,F.tZ)(M.Z,{title:(0,F.BX)(f.Fragment,{children:[(0,F.tZ)("div",{children:r.name}),(0,F.tZ)(te,{children:(0,C.t)("Member Settings")})]})}),(0,F.BX)(B.s_,{children:[(0,F.tZ)(B.V9,{children:(0,C.t)("Basics")}),(0,F.tZ)(B.N,{children:(0,F.tZ)(B.Lv,{children:(0,F.BX)(se,{children:[(0,F.BX)(re,{children:[(0,F.BX)("div",{children:[(0,F.tZ)(ne,{children:(0,C.t)("Email")}),(0,F.tZ)("div",{children:(0,F.tZ)(S.Z,{href:"mailto:".concat(i),children:i})})]}),(0,F.BX)("div",{children:[(0,F.tZ)(ne,{children:(0,C.t)("Status")}),(0,F.tZ)("div",{"data-test-id":"member-status",children:this.renderMemberStatus(r)})]}),(0,F.BX)("div",{children:[(0,F.tZ)(ne,{children:(0,C.t)("Added")}),(0,F.tZ)("div",{children:(0,F.tZ)(_.Z,{dateOnly:!0,date:r.dateCreated})})]})]}),s&&(0,F.BX)(oe,{children:[(0,F.BX)("div",{children:[(0,F.tZ)(ne,{children:(0,C.t)("Invite Link")}),(0,F.tZ)(y.Z,{children:(0,F.tZ)(ie,{children:s})}),(0,F.tZ)("p",{className:"help-block",children:(0,C.t)("This unique invite link may only be used by this member.")})]}),(0,F.BX)(ae,{children:[(0,F.tZ)(x.ZP,{onClick:function(){return e.handleInvite(!0)},children:(0,C.t)("Generate New Invite")}),a&&(0,F.tZ)(x.ZP,{"data-test-id":"resend-invite",onClick:function(){return e.handleInvite(!1)},children:(0,C.t)("Resend Invite")})]})]})]})})})]}),l&&(0,F.BX)(B.s_,{children:[(0,F.tZ)(B.V9,{children:(0,C.t)("Authentication")}),(0,F.tZ)(B.N,{children:(0,F.tZ)(A.Z,{alignRight:!0,flexibleControlStateSize:!0,label:(0,C.t)("Reset two-factor authentication"),help:(0,C.t)("Resetting two-factor authentication will remove all two-factor authentication methods for this member."),children:(0,F.tZ)(O.Z,{"data-test-id":"reset-2fa-tooltip",disabled:this.showResetButton(),title:this.getTooltip(),children:(0,F.tZ)(w.Z,{disabled:!this.showResetButton(),message:(0,C._N)("Are you sure you want to disable all two-factor authentication methods for [name]?",{name:r.name?r.name:"this member"}),onConfirm:this.handle2faReset,"data-test-id":"reset-2fa-confirm",children:(0,F.tZ)(x.ZP,{"data-test-id":"reset-2fa",priority:"danger",children:(0,C.t)("Reset two-factor authentication")})})})})})]}),(0,F.tZ)(H,{enforceAllowed:!1,disabled:!o,roleList:r.roles,selectedRole:r.role,setRole:function(t){return e.setState({member:J(J({},r),{},{role:t})})}}),(0,F.tZ)(N.Z,{organization:t,selectedTeams:r.teams,disabled:!o,onAddTeam:this.handleAddTeam,onRemoveTeam:this.handleRemoveTeam}),(0,F.tZ)(le,{children:(0,F.tZ)(x.ZP,{priority:"primary",busy:this.state.busy,onClick:this.handleSave,disabled:!o,children:(0,C.t)("Save Member")})})]})}}]),p}(X.Z);const ee=(0,D.Z)($);var te=(0,m.Z)("div",{target:"euxp5937"})("color:",(function(e){return e.theme.gray300}),";font-weight:normal;font-size:",(function(e){return e.theme.fontSizeLarge}),";"),re=(0,m.Z)("div",{target:"euxp5936"})("display:grid;grid-auto-flow:column;grid-template-columns:2fr 1fr 1fr;grid-gap:",(0,z.Z)(2),";width:100%;@media (max-width: ",(function(e){return e.theme.breakpoints[0]}),"){grid-auto-flow:row;grid-template-columns:auto;}"),ne=(0,m.Z)("div",{target:"euxp5935"})("font-weight:bold;margin-bottom:",(0,z.Z)(.5),";color:",(function(e){return e.theme.textColor}),";"),se=(0,m.Z)("div",{target:"euxp5934"})({name:"8za49e",styles:"overflow:hidden;flex:1"}),oe=(0,m.Z)("div",{target:"euxp5933"})("border-top:1px solid ",(function(e){return e.theme.border}),";margin-top:",(0,z.Z)(2),";padding-top:",(0,z.Z)(2),";"),ie=(0,m.Z)("code",{target:"euxp5932"})((function(e){return(0,P.T)(e)}),";"),ae=(0,m.Z)("div",{target:"euxp5931"})("display:grid;grid-gap:",(0,z.Z)(1),";grid-auto-flow:column;justify-content:flex-end;margin-top:",(0,z.Z)(2),";"),le=(0,m.Z)("div",{target:"euxp5930"})({name:"skgbeu",styles:"display:flex;justify-content:flex-end"})}}]);
//# sourceMappingURL=app_views_settings_organizationMembers_organizationMemberDetail_tsx.js.map