(self.webpackChunk=self.webpackChunk||[]).push([["app_views_settings_projectAlerts_create_tsx"],{"./app/views/settings/projectAlerts/create.tsx":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>E}),s("../node_modules/core-js/modules/es.reflect.construct.js"),s("../node_modules/core-js/modules/es.object.keys.js"),s("../node_modules/core-js/modules/es.symbol.js"),s("../node_modules/core-js/modules/es.array.filter.js"),s("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("../node_modules/core-js/modules/es.array.for-each.js"),s("../node_modules/core-js/modules/web.dom-collections.for-each.js"),s("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),s("../node_modules/core-js/modules/es.object.define-properties.js"),s("../node_modules/core-js/modules/es.object.define-property.js");var r=s("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),o=s("../node_modules/@babel/runtime/helpers/esm/createClass.js"),n=s("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),i=s("../node_modules/@babel/runtime/helpers/esm/inherits.js"),a=s("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),l=s("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),c=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),u=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),d=(s("../node_modules/core-js/modules/es.array.concat.js"),s("../node_modules/core-js/modules/es.array.includes.js"),s("../node_modules/core-js/modules/es.string.includes.js"),s("../node_modules/core-js/modules/es.regexp.exec.js"),s("../node_modules/core-js/modules/es.string.replace.js"),s("../node_modules/react/index.js")),p=s("../node_modules/react-router/es/index.js"),m=s("./app/components/layouts/thirds.tsx"),j=s("./app/components/sentryDocumentTitle.tsx"),f=s("./app/locale.tsx"),y=s("./app/styles/space.tsx"),h=s("./app/utils/analytics.tsx"),b=s("./app/utils/discover/eventView.tsx"),v=s("./app/utils/guid.tsx"),g=s("./app/views/alerts/builder/builderBreadCrumbs.tsx"),w=s("./app/views/alerts/wizard/options.tsx"),_=s("./app/views/alerts/wizard/utils.tsx"),Z=s("../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),O=(s("../node_modules/core-js/modules/es.array.map.js"),s("../node_modules/core-js/modules/es.array.iterator.js"),s("../node_modules/core-js/modules/es.object.to-string.js"),s("../node_modules/core-js/modules/es.set.js"),s("../node_modules/core-js/modules/es.string.iterator.js"),s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/core-js/modules/es.array.find.js"),s("./app/utils/withTeams.tsx")),x=s("./app/views/settings/incidentRules/constants.tsx"),P=s("./app/views/settings/incidentRules/ruleForm/index.tsx"),S=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function T(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}function R(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?T(Object(s),!0).forEach((function(t){(0,c.Z)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):T(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var z=function(e){(0,i.Z)(d,e);var t,s,u=(t=d,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,l.Z)(t);if(s){var o=(0,l.Z)(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return(0,a.Z)(this,e)});function d(){var e;(0,r.Z)(this,d);for(var t=arguments.length,s=new Array(t),o=0;o<t;o++)s[o]=arguments[o];return e=u.call.apply(u,[this].concat(s)),(0,c.Z)((0,n.Z)(e),"handleSubmitSuccess",(function(){var t=e.props.router,s=e.props.params.orgId;h.oF.endTransaction({name:"saveAlertRule"}),t.push("/organizations/".concat(s,"/alerts/rules/"))})),e}return(0,o.Z)(d,[{key:"render",value:function(){var e=this.props,t=e.project,s=e.eventView,r=e.wizardTemplate,o=e.sessionId,n=e.teams,i=(0,Z.Z)(e,["project","eventView","wizardTemplate","sessionId","teams"]),a=s?(0,x.H9)(s):r?(0,x.Q6)(r):(0,x.ep)(),l=n.filter((function(e){return e.isMember})).map((function(e){return e.id}));if(i.organization.features.includes("team-alerts-ownership")){var c,u=new Set(t.teams.map((function(e){return e.id}))),d=null!==(c=l.find((function(e){return u.has(e)})))&&void 0!==c?c:null;a.owner=d&&"team:".concat(d)}return(0,S.tZ)(P.Z,R({onSubmitSuccess:this.handleSubmitSuccess,rule:R(R({},a),{},{projects:[t.slug]}),sessionId:o,project:t,userTeamIds:l},i))}}]),d}(d.Component);z.displayName="IncidentRulesCreate";const C=(0,O.Z)(z);var k=s("./app/views/settings/projectAlerts/issueRuleEditor/index.tsx");function A(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}function D(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?A(Object(s),!0).forEach((function(t){(0,c.Z)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):A(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var I=function(e){(0,i.Z)(y,e);var t,s,u=(t=y,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,l.Z)(t);if(s){var o=(0,l.Z)(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return(0,a.Z)(this,e)});function y(){var e;(0,r.Z)(this,y);for(var t=arguments.length,s=new Array(t),o=0;o<t;o++)s[o]=arguments[o];return e=u.call.apply(u,[this].concat(s)),(0,c.Z)((0,n.Z)(e),"state",{eventView:void 0,alertType:e.props.location.pathname.includes("/alerts/rules/")?"issue":e.props.location.pathname.includes("/alerts/metric-rules/")?"metric":null}),(0,c.Z)((0,n.Z)(e),"sessionId",(0,v.E)()),(0,c.Z)((0,n.Z)(e),"handleChangeAlertType",(function(t){e.setState({alertType:t})})),e}return(0,o.Z)(y,[{key:"componentDidMount",value:function(){var e=this.props,t=e.organization,s=e.location,r=e.project;if((0,h.ec)({eventKey:"new_alert_rule.viewed",eventName:"New Alert Rule: Viewed",organization_id:t.id,project_id:r.id,session_id:this.sessionId}),null!=s&&s.query){var o=s.query,n=o.createFromDiscover,i=o.createFromWizard;if(n){var a=b.ZP.fromLocation(s);this.setState({alertType:"metric",eventView:a})}else if(i){var l=o.aggregate,c=o.dataset,u=o.eventTypes;l&&c&&u?this.setState({alertType:"metric",wizardTemplate:{aggregate:l,dataset:c,eventTypes:u}}):this.setState({alertType:"issue"})}else p.browserHistory.replace("/organizations/".concat(t.slug,"/alerts/").concat(r.id,"/wizard"))}}},{key:"render",value:function(){var e,t,s=this.props,r=s.hasMetricAlerts,o=s.organization,n=s.project,i=s.params.projectId,a=s.location,l=s.routes,c=this.state,u=c.alertType,p=c.eventView,y=c.wizardTemplate;null!=a&&null!==(e=a.query)&&void 0!==e&&e.createFromWizard&&(t=y?(0,_.k)(y):"issues");var h=(0,f.t)("New Alert Rule");return(0,S.BX)(d.Fragment,{children:[(0,S.tZ)(j.Z,{title:h,projectSlug:i}),(0,S.tZ)(m.h4,{children:(0,S.BX)(V,{children:[(0,S.tZ)(g.Z,{hasMetricAlerts:r,orgSlug:o.slug,alertName:(0,f.t)("Set Conditions"),title:t?(0,f.t)("Select Alert"):h,projectSlug:i,routes:l,location:a,canChangeProject:!0}),(0,S.tZ)(m.Dx,{children:t?"".concat((0,f.t)("Set Conditions for")," ").concat(w.gb[t]):h})]})}),(0,S.tZ)(B,{children:(0,S.BX)(m.or,{fullWidth:!0,children:[(!r||"issue"===u)&&(0,S.tZ)(k.Z,D(D({},this.props),{},{project:n})),r&&"metric"===u&&(0,S.tZ)(C,D(D({},this.props),{},{eventView:p,wizardTemplate:y,sessionId:this.sessionId,project:n,isCustomMetric:"custom"===t}))]})})]})}}]),y}(d.Component);I.displayName="Create";var B=(0,u.Z)(m.uT,{target:"es9d0801"})("margin-bottom:-",(0,y.Z)(3),";*:not(img){max-width:1000px;}"),V=(0,u.Z)(m.oB,{target:"es9d0800"})({name:"1h8nup8",styles:"overflow:visible"});const E=I}}]);
//# sourceMappingURL=app_views_settings_projectAlerts_create_tsx.js.map