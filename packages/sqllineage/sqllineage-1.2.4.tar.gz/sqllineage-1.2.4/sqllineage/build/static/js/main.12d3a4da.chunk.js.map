{"version":3,"sources":["api/client.js","features/editor/editorSlice.js","features/widget/Loading.js","features/widget/LoadError.js","features/editor/DAG.js","features/editor/Editor.js","features/directory/directorySlice.js","features/directory/DirectoryTreeItem.js","features/directory/Directory.js","features/editor/DAGDesc.js","App.js","app/store.js","index.js"],"names":["assemble_absolute_endpoint","relative_endpoint","url","URL","window","location","href","backend_port","process","REACT_APP_BACKEND_PORT","backend_origin","origin","replace","port","client","endpoint","a","body","customConfig","headers","config","method","JSON","stringify","fetch","response","json","data","ok","Promise","reject","statusText","get","post","fetchContent","createAsyncThunk","payload","fetchDAG","editorSlice","createSlice","name","initialState","file","content","contentComposed","editable","editorStatus","editorError","dagContent","dagVerbose","dagStatus","dagError","reducers","setContentComposed","state","action","setEditable","setFile","extraReducers","pending","fulfilled","rejected","error","message","dag","verbose","selectEditor","editor","actions","Loading","props","Box","display","justifyContent","alignItems","minHeight","Fade","in","style","transitionDelay","unmountOnExit","CircularProgress","LoadError","Icon","info","EmojiPeopleOutlinedIcon","ErrorOutlinedIcon","color","fontSize","split","map","line","cytoscape","use","dagre","useStyles","makeStyles","theme","speedDial","position","bottom","spacing","right","DAG","classes","editorState","useSelector","React","useState","open","setOpen","cyRef","useRef","useEffect","current","cy","_cy","on","e","sel","target","elements","union","successors","predecessors","addClass","difference","removeClass","height","length","width","stylesheet","selector","layout","rankDir","rankSep","zoom","minZoom","maxZoom","wheelSensitivity","ref","SpeedDial","ariaLabel","className","hidden","icon","SpeedDialIcon","onClose","onOpen","direction","FabProps","SpeedDialAction","title","onClick","aDownloadLink","document","createElement","download","jpg","click","fit","Editor","dispatch","useDispatch","queryParam","URLSearchParams","useLocation","search","history","useHistory","query","push","options","minimap","enabled","readOnly","wordWrap","automaticLayout","language","value","editorDidMount","monaco","EditorOption","onDidBlurEditorText","getOption","getValue","onKeyDown","trigger","KeyCode","Backspace","DirectoryAPI","fetchRootDirectory","directorySlice","status","openNonSQLWarning","setOpenNonSQLWarning","selectDirectory","directory","backgroundColor","marginLeft","labelRoot","padding","labelIcon","marginRight","labelText","fontWeight","flexGrow","DirectoryTreeItem","directoryState","childNodes","setChildNodes","expanded","setExpanded","is_root","children","node","id","is_dir","TreeView","defaultCollapseIcon","defaultExpandIcon","onNodeSelect","endsWith","onNodeToggle","event","nodes","expandingNodes","filter","x","includes","childId","then","result","TreeItem","nodeId","label","Typography","variant","Directory","Object","fromEntries","searchParams","Snackbar","anchorOrigin","vertical","horizontal","autoHideDuration","DAGDesc","appBar","zIndex","drawer","menuButton","marginTop","float","hide","drawerPaper","drawerWidth","contentShift","transition","transitions","create","easing","easeOut","duration","enteringScreen","dragger","cursor","top","left","isResizing","App","selectedValue","setSelectedValue","setDrawerWidth","useMemo","handleMouseMove","clientX","innerWidth","handleMouseUp","removeEventListener","AppBar","Toolbar","IconButton","edge","aria-label","Tooltip","arrow","to","Drawer","paper","onMouseDown","stopPropagation","preventDefault","addEventListener","clsx","Paper","elevation","Grid","container","justify","FormControl","component","RadioGroup","row","defaultValue","onChange","FormControlLabel","control","Radio","configureStore","reducer","directoryReducer","editorReducer","ReactDOM","render","StrictMode","store","getElementById"],"mappings":"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","file":"static/js/main.12d3a4da.chunk.js","sourcesContent":["// A tiny wrapper around fetch(), borrowed from\n// https://kentcdodds.com/blog/replace-axios-with-a-simple-custom-fetch-wrapper\n\nexport function assemble_absolute_endpoint(relative_endpoint) {\n  let url = new URL(window.location.href);\n  let backend_port = process.env.REACT_APP_BACKEND_PORT;\n  let backend_origin = backend_port ? url.origin.replace(url.port, backend_port) : url.origin;\n  return `${backend_origin}${relative_endpoint}`\n}\n\nexport async function client(endpoint, {body, ...customConfig} = {}) {\n  const headers = {'Content-Type': 'application/json'}\n\n  const config = {\n    method: body ? 'POST' : 'GET',\n    ...customConfig,\n    headers: {\n      ...headers,\n      ...customConfig.headers,\n    },\n  }\n\n  if (body) {\n    config.body = JSON.stringify(body)\n  }\n\n  let data\n  const response = await window.fetch(endpoint, config)\n  data = await response.json()\n  if (response.ok) {\n    return data\n  } else {\n    // 4XX or 5XX, try use response.json() first, if not then fallback to statusText\n    return Promise.reject(data ? data : response.statusText)\n  }\n}\n\nclient.get = function (endpoint, customConfig = {}) {\n  return client(endpoint, {...customConfig, method: 'GET'})\n}\n\nclient.post = function (endpoint, body, customConfig = {}) {\n  return client(endpoint, {...customConfig, body})\n}\n","import {createAsyncThunk, createSlice} from '@reduxjs/toolkit';\nimport {assemble_absolute_endpoint, client} from \"../../api/client\";\n\nconst initialState = {\n  file: \"\",\n  content: \"\",\n  contentComposed: \"\",\n  editable: false,\n  editorStatus: 'idle',\n  editorError: null,\n  dagContent: [],\n  dagVerbose: \"\",\n  dagStatus: 'idle',\n  dagError: null\n}\n\nexport const fetchContent = createAsyncThunk('editor/fetchContent', async (payload) => {\n  return await client.post(assemble_absolute_endpoint(\"/script\"), payload);\n})\n\nexport const fetchDAG = createAsyncThunk('dag/fetchDAG', async (payload) => {\n  return await client.post(assemble_absolute_endpoint(\"/lineage\"), payload);\n})\n\nexport const editorSlice = createSlice({\n  name: 'editor',\n  initialState,\n  reducers: {\n    setContentComposed(state, action) {\n      state.contentComposed = action.payload\n    },\n    setEditable(state, action) {\n      state.editable = action.payload\n    },\n    setFile(state, action) {\n      state.file = action.payload\n    }\n  },\n  extraReducers: {\n    [fetchContent.pending]: (state) => {\n      state.editorStatus = \"loading\"\n    },\n    [fetchContent.fulfilled]: (state, action) => {\n      state.editorStatus = \"succeeded\";\n      state.content = action.payload.content\n    },\n    [fetchContent.rejected]: (state, action) => {\n      state.editorStatus = \"failed\"\n      state.editorError = action.error.message\n    },\n    [fetchDAG.pending]: (state) => {\n      state.dagStatus = \"loading\"\n    },\n    [fetchDAG.fulfilled]: (state, action) => {\n      state.dagStatus = \"succeeded\";\n      state.dagContent = action.payload.dag;\n      state.dagVerbose = action.payload.verbose;\n    },\n    [fetchDAG.rejected]: (state, action) => {\n      state.dagStatus = \"failed\";\n      state.dagError = action.error.message;\n    }\n  }\n});\n\nexport const selectEditor = state => state.editor;\nexport const {setContentComposed, setEditable, setFile} = editorSlice.actions;\n\nexport default editorSlice.reducer;\n","import React from 'react';\nimport Fade from '@material-ui/core/Fade';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport {Box} from \"@material-ui/core\";\n\n\nexport function Loading(props) {\n  return (\n    <Box\n      display=\"flex\"\n      justifyContent=\"center\"\n      alignItems=\"center\"\n      minHeight={props.minHeight}\n    >\n      <Fade\n        in\n        style={{\n          transitionDelay: '500ms',\n        }}\n        unmountOnExit\n      >\n        <CircularProgress/>\n      </Fade>\n    </Box>\n  );\n}\n","import React from 'react';\nimport {Box} from \"@material-ui/core\";\nimport EmojiPeopleOutlinedIcon from '@material-ui/icons/EmojiPeopleOutlined';\nimport ErrorOutlinedIcon from \"@material-ui/icons/Error\";\n\n\nexport function LoadError(props) {\n  let Icon = props.info ? EmojiPeopleOutlinedIcon : ErrorOutlinedIcon;\n  return (\n    <Box\n      display=\"flex\"\n      justifyContent=\"center\"\n      alignItems=\"center\"\n      minHeight={props.minHeight}\n    >\n    <span>\n      <Icon color=\"primary\" fontSize=\"large\"/>\n      {props.message.split(\"\\n\").map(line => <p>{line}</p>)}\n    </span>\n    </Box>\n  );\n}\n","import React, {useEffect, useRef} from 'react';\nimport CytoscapeComponent from 'react-cytoscapejs';\nimport dagre from 'cytoscape-dagre';\nimport cytoscape from 'cytoscape';\nimport {useSelector} from \"react-redux\";\nimport {selectEditor} from \"./editorSlice\";\nimport {Loading} from \"../widget/Loading\";\nimport {LoadError} from \"../widget/LoadError\";\nimport {SpeedDial, SpeedDialIcon} from \"@material-ui/lab\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport SpeedDialAction from '@material-ui/lab/SpeedDialAction';\nimport SaveAltIcon from '@material-ui/icons/SaveAlt';\nimport ZoomInIcon from '@material-ui/icons/ZoomIn';\nimport SettingsBackupRestoreIcon from '@material-ui/icons/SettingsBackupRestore';\nimport ZoomOutIcon from '@material-ui/icons/ZoomOut';\n\ncytoscape.use(dagre);\n\nconst useStyles = makeStyles((theme) => ({\n  speedDial: {\n    position: 'absolute',\n    '&.MuiSpeedDial-directionLeft': {\n      bottom: theme.spacing(5),\n      right: theme.spacing(2),\n    }\n  },\n}))\n\n\nexport function DAG(props) {\n  const classes = useStyles();\n  const editorState = useSelector(selectEditor);\n  const [open, setOpen] = React.useState(false);\n  const cyRef = useRef(null);\n\n  const handleSave = () => {\n    if (cyRef.current) {\n      let cy = cyRef.current._cy;\n      let aDownloadLink = document.createElement('a');\n      aDownloadLink.download = `${editorState.file}.jpg`;\n      aDownloadLink.href = cy.jpg({'full': true, 'quality': 1});\n      aDownloadLink.click();\n      setOpen(false);\n    }\n  }\n\n  useEffect(() => {\n    if (cyRef.current) {\n      let cy = cyRef.current._cy;\n      cy.on(\"mouseover\", \"node\", function (e) {\n        let sel = e.target;\n        let elements = sel.union(sel.successors()).union(sel.predecessors())\n        elements.addClass(\"highlight\");\n        cy.elements().difference(elements).addClass(\"semitransparent\")\n      });\n      cy.on(\"mouseout\", \"node\", function () {\n        cy.elements().removeClass(\"semitransparent\");\n        cy.elements().removeClass(\"highlight\");\n      });\n    }\n  })\n\n  if (editorState.dagStatus === \"loading\") {\n    return <Loading minHeight={props.height}/>\n  } else if (editorState.dagStatus === \"failed\") {\n    return <LoadError minHeight={props.height}\n                      message={editorState.dagError + \"\\nPlease check your SQL code for potential syntax error in Script View.\"}/>\n  } else if (editorState.dagContent.length === 0) {\n    let message, info = false;\n    if (editorState.editable) {\n      if (editorState.contentComposed === \"\") {\n        message = \"Welcome to SQLLineage Playground.\\n\" +\n          \"Just paste your SQL in Script View and switch back here, you'll get DAG visualization for your SQL code.\\n\" +\n          \"Or select SQL file on the left directory tree for visualization.\\n\" +\n          \"Have fun!\"\n        info = true\n      } else {\n        message = \"No Lineage Info found in your SQL.\\nPlease review your code in Script View.\"\n      }\n    } else {\n      message = `No Lineage Info found in SQL file ${editorState.file}.\\nPlease review the code in Script View.`\n    }\n    return <LoadError minHeight={props.height} message={message} info={info}/>\n  } else {\n    const stylesheet = [\n      {\n        selector: 'node',\n        style: {\n          height: 10,\n          width: 10,\n          content: 'data(id)',\n          'text-valign': 'top',\n          'text-halign': 'right',\n          'font-size': 10,\n          'color': '#35393e',\n          'background-color': '#2fc1d3',\n          'border-color': '#000',\n          'border-width': 1,\n          'border-opacity': 0.8\n        }\n      },\n      {\n        selector: 'edge',\n        style: {\n          width: 1,\n          'line-color': '#9ab5c7',\n          'target-arrow-color': '#9ab5c7',\n          'target-arrow-shape': 'triangle',\n          'arrow-scale': 0.8,\n          'curve-style': 'bezier'\n        }\n      },\n      {\n        selector: '.highlight',\n        style: {\n          'background-color': '#076fa1',\n        }\n      },\n      {\n        selector: '.semitransparent',\n        style: {'opacity': '0.2'}\n      },\n    ]\n    const layout = {\n      name: 'dagre',\n      rankDir: 'LR',\n      rankSep: 200,\n    };\n    const style = {width: props.width, height: props.height};\n    return (\n      <div>\n        <CytoscapeComponent\n          elements={editorState.dagContent}\n          stylesheet={stylesheet}\n          style={style}\n          layout={layout}\n          zoom={1}\n          minZoom={0.5}\n          maxZoom={2}\n          wheelSensitivity={0.2}\n          ref={cyRef}\n        />\n        <SpeedDial\n          ariaLabel=\"SpeedDial example\"\n          className={classes.speedDial}\n          hidden={false}\n          icon={<SpeedDialIcon/>}\n          onClose={() => setOpen(false)}\n          onOpen={() => setOpen(true)}\n          open={open}\n          direction=\"left\"\n          FabProps={{\"size\": \"small\"}}\n        >\n          <SpeedDialAction\n            title=\"Save\"\n            icon={<SaveAltIcon/>}\n            onClick={handleSave}\n          />\n          <SpeedDialAction\n            title=\"Zoom In\"\n            icon={<ZoomInIcon/>}\n            onClick={() => {\n              cyRef.current._cy.zoom(cyRef.current._cy.zoom() + 0.1)\n            }}\n          />\n          <SpeedDialAction\n            title=\"Auto Fit\"\n            icon={<SettingsBackupRestoreIcon/>}\n            onClick={() => {\n              cyRef.current._cy.fit()\n            }}\n          />\n          <SpeedDialAction\n            title=\"Zoom Out\"\n            icon={<ZoomOutIcon/>}\n            onClick={() => {\n              cyRef.current._cy.zoom(cyRef.current._cy.zoom() - 0.1)\n            }}\n          />\n        </SpeedDial>\n      </div>\n    );\n  }\n}\n","import React, {useEffect} from \"react\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {fetchContent, fetchDAG, selectEditor, setContentComposed, setEditable, setFile} from \"./editorSlice\";\nimport MonacoEditor from \"react-monaco-editor\";\nimport {Loading} from \"../widget/Loading\";\nimport {LoadError} from \"../widget/LoadError\";\nimport {useHistory, useLocation} from \"react-router-dom\";\n\nconst useQueryParam = () => {\n  return new URLSearchParams(useLocation().search)\n};\n\nexport function Editor(props) {\n  const dispatch = useDispatch();\n  const editorState = useSelector(selectEditor);\n  const queryParam = useQueryParam();\n  const history = useHistory();\n\n  useEffect(() => {\n    let query = queryParam.get(\"e\");\n    if (query !== null) {\n      dispatch(setContentComposed(query));\n      history.push(\"/\");\n    } else {\n      let file = queryParam.get(\"f\");\n      if (editorState.file !== file) {\n        dispatch(setFile(file));\n        if (file === null) {\n          dispatch(setEditable(true));\n          dispatch(fetchDAG({\"e\": editorState.contentComposed}))\n        } else {\n          dispatch(setEditable(false));\n          dispatch(fetchContent({\"f\": file}));\n          dispatch(fetchDAG({\"f\": file}));\n        }\n      }\n    }\n\n\n  })\n\n  const handleEditorDidMount = (editor, monaco) => {\n    const readOnly = monaco.editor.EditorOption.readOnly;\n    editor.onDidBlurEditorText(() => {\n      if (!editor.getOption(readOnly)) {\n        dispatch(setContentComposed(editor.getValue()));\n        dispatch(fetchDAG({\"e\": editor.getValue()}));\n      }\n    })\n    editor.onKeyDown(() => {\n      // This is a walk-around to trigger \"Cannot editor in readonly editor\". Be default this tooltip is only shown\n      // when user press backspace key on readonly editor, we want it with any key\n      if (editor.getOption(readOnly)) {\n        editor.trigger(monaco.KeyCode.Backspace, 'deleteLeft')\n      }\n    })\n  }\n\n  if (editorState.editorStatus === \"loading\") {\n    return <Loading minHeight={props.height}/>\n  } else if (editorState.editorStatus === \"failed\") {\n    return <LoadError minHeight={props.height} message={editorState.editorError}/>\n  } else {\n    const options = {\n      minimap: {enabled: false},\n      readOnly: !editorState.editable,\n      wordWrap: \"on\",\n      automaticLayout: true\n    }\n    return <MonacoEditor\n      width={props.width}\n      height={props.height}\n      language=\"sql\"\n      value={editorState.editable ? editorState.contentComposed : editorState.content}\n      options={options}\n      editorDidMount={handleEditorDidMount}\n    />\n  }\n}\n","import {createAsyncThunk, createSlice} from '@reduxjs/toolkit';\nimport {assemble_absolute_endpoint, client} from \"../../api/client\";\n\nconst initialState = {\n  content: {},\n  status: 'idle',\n  error: null,\n  openNonSQLWarning: false\n};\n\nexport const DirectoryAPI = async (payload) => {\n  return await client.post(assemble_absolute_endpoint(\"/directory\"), payload);\n}\n\nexport const fetchRootDirectory = createAsyncThunk('directory/fetchDirectory', DirectoryAPI);\n\nexport const directorySlice = createSlice({\n  name: 'directory',\n  initialState,\n  reducers: {\n    setOpenNonSQLWarning(state, action) {\n      state.openNonSQLWarning = action.payload\n    }\n  },\n  extraReducers: {\n    [fetchRootDirectory.pending]: (state) => {\n      state.status = \"loading\"\n    },\n    [fetchRootDirectory.fulfilled]: (state, action) => {\n      state.status = \"succeeded\";\n      state.content = action.payload\n    },\n    [fetchRootDirectory.rejected]: (state, action) => {\n      state.status = \"failed\"\n      state.error = action.error.message\n    }\n  }\n});\n\nexport const selectDirectory = state => state.directory;\nexport const {setOpenNonSQLWarning} = directorySlice.actions;\n\nexport default directorySlice.reducer;\n","import React, {useEffect} from \"react\";\nimport Typography from \"@material-ui/core/Typography\";\nimport TreeView from \"@material-ui/lab/TreeView\";\nimport TreeItem from \"@material-ui/lab/TreeItem\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\nimport FolderIcon from \"@material-ui/icons/Folder\";\nimport DescriptionIcon from \"@material-ui/icons/Description\";\nimport {makeStyles} from \"@material-ui/core\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {DirectoryAPI, selectDirectory, setOpenNonSQLWarning} from \"./directorySlice\";\nimport {useHistory} from \"react-router-dom\";\n\n\nconst useStyles = makeStyles((theme) => ({\n  \"@global\": {\n    \".MuiTreeItem-root.Mui-selected > .MuiTreeItem-content .MuiTreeItem-label\": {\n      backgroundColor: \"white\"\n    },\n  },\n  directory: {\n    marginLeft: theme.spacing(0.2)\n  },\n  labelRoot: {\n    display: 'flex',\n    alignItems: 'center',\n    padding: theme.spacing(0.1, 0),\n  },\n  labelIcon: {\n    marginRight: theme.spacing(0.2),\n  },\n  labelText: {\n    fontWeight: 'inherit',\n    flexGrow: 1,\n  },\n}));\n\n\nexport default function DirectoryTreeItem(props) {\n  const classes = useStyles();\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const directoryState = useSelector(selectDirectory);\n  const [childNodes, setChildNodes] = React.useState(null);\n  const [expanded, setExpanded] = React.useState([]);\n\n  useEffect(() => {\n    if (props.is_root) {\n      setChildNodes((directoryState.content.children ?? []).map(\n        node => <DirectoryTreeItem id={node.id} name={node.name} is_dir={node.is_dir} is_root={false}/>)\n      )\n      setExpanded([props.id])\n    }\n  }, [directoryState.content.children, props.id, props.is_root])\n\n  const handleSelect = () => {\n    if (!props.is_dir) {\n      if (props.name.endsWith(\".sql\")) {\n        history.push(`/?f=${props.id}`);\n      } else {\n        dispatch(setOpenNonSQLWarning(true))\n      }\n    }\n  };\n\n  const handleToggle = (event, nodes) => {\n    const expandingNodes = nodes.filter(x => !expanded.includes(x));\n    setExpanded(nodes);\n    if (expandingNodes[0]) {\n      const childId = expandingNodes[0];\n      DirectoryAPI({\"d\": childId}).then(result =>\n        setChildNodes(\n          result.children.map(node => <DirectoryTreeItem id={node.id} name={node.name} is_dir={node.is_dir}\n                                                         is_root={false}/>)\n        )\n      );\n    }\n  };\n\n  return (\n    <TreeView\n      className={classes.directory}\n      defaultCollapseIcon={<ExpandMoreIcon/>}\n      defaultExpandIcon={<ChevronRightIcon/>}\n      expanded={expanded}\n      onNodeSelect={handleSelect}\n      onNodeToggle={handleToggle}\n    >\n      <TreeItem\n        key={props.id}\n        nodeId={props.id}\n        label={\n          <div className={classes.labelRoot}>\n            {props.is_dir ? <FolderIcon color=\"action\" className={classes.labelIcon}/> :\n              <DescriptionIcon color=\"action\" className={classes.labelIcon}/>}\n            <Typography variant=\"body2\" className={classes.labelText}>\n              {props.name}\n            </Typography>\n          </div>\n        }\n      >\n        {props.is_dir && (childNodes || [<div key=\"stub\"/>])}\n      </TreeItem>\n    </TreeView>\n  );\n}\n","import React, {useEffect} from \"react\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {fetchRootDirectory, selectDirectory, setOpenNonSQLWarning} from \"./directorySlice\";\nimport {Loading} from \"../widget/Loading\";\nimport {LoadError} from \"../widget/LoadError\";\nimport {Snackbar} from \"@material-ui/core\";\nimport DirectoryTreeItem from \"./DirectoryTreeItem\";\n\n\nexport function Directory(props) {\n  const dispatch = useDispatch();\n  const directoryState = useSelector(selectDirectory);\n\n  useEffect(() => {\n    if (directoryState.status === \"idle\") {\n      let url = new URL(window.location.href);\n      dispatch(fetchRootDirectory(Object.fromEntries(url.searchParams)))\n    }\n  })\n\n  if (directoryState.status === \"loading\") {\n    return <Loading minHeight={props.height}/>\n  } else if (directoryState.status === \"failed\") {\n    return <LoadError minHeight={props.height} message={directoryState.error}/>\n  } else {\n    return <div>\n      <DirectoryTreeItem id={directoryState.content.id} name={directoryState.content.name} is_dir={true}\n                         is_root={true}/>\n      <Snackbar\n        anchorOrigin={{\n          vertical: 'bottom',\n          horizontal: 'left',\n        }}\n        open={directoryState.openNonSQLWarning}\n        autoHideDuration={1000}\n        onClose={() => {\n          dispatch(setOpenNonSQLWarning(false))\n        }}\n        message=\"Non SQL File Is Not Supported\"\n      />\n    </div>\n  }\n}\n","import {Loading} from \"../widget/Loading\";\nimport {LoadError} from \"../widget/LoadError\";\nimport React from \"react\";\nimport {useSelector} from \"react-redux\";\nimport MonacoEditor from \"react-monaco-editor\";\nimport {selectEditor} from \"./editorSlice\";\n\nexport function DAGDesc(props) {\n  const editorState = useSelector(selectEditor);\n\n  if (editorState.dagStatus === \"loading\") {\n    return <Loading minHeight={props.height}/>\n  } else if (editorState.dagStatus === \"failed\") {\n    return <LoadError minHeight={props.height} message={editorState.dagError + \"\\nPlease check your SQL code for potential syntax error in Script View.\"}/>\n  } else {\n    const options = {\n      minimap: {enabled: false},\n      readOnly: true,\n      wordWrap: \"on\",\n      automaticLayout: true\n    }\n    return <MonacoEditor\n      width={props.width}\n      height={props.height}\n      value={editorState.dagVerbose}\n      options={options}\n    />\n  }\n}\n","import React, {useMemo} from 'react';\nimport {Box, Drawer, FormControl, FormControlLabel, Grid, Paper, Radio, RadioGroup, Tooltip} from \"@material-ui/core\";\nimport {DAG} from \"./features/editor/DAG\";\nimport {Editor} from \"./features/editor/Editor\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport MenuIcon from \"@material-ui/icons/Menu\";\nimport CreateIcon from \"@material-ui/icons/Create\";\nimport Typography from \"@material-ui/core/Typography\";\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport clsx from \"clsx\";\nimport {Directory} from \"./features/directory/Directory\";\nimport {BrowserRouter as Router, Link} from \"react-router-dom\";\nimport {DAGDesc} from \"./features/editor/DAGDesc\";\nimport {useSelector} from \"react-redux\";\nimport {selectEditor} from \"./features/editor/editorSlice\";\n\n\nconst useStyles = makeStyles((theme) => ({\n  appBar: {\n    flexGrow: 1,\n    zIndex: theme.zIndex.drawer + 1,\n  },\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n  title: {\n    flexGrow: 1,\n  },\n  content: {\n    padding: theme.spacing(0.5),\n    marginTop: theme.spacing(6),\n    float: \"right\"\n  },\n  hide: {\n    display: \"none\"\n  },\n  drawerPaper: {\n    width: ({drawerWidth}) => drawerWidth + \"vw\",\n  },\n  contentShift: {\n    transition: theme.transitions.create('margin', {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n  },\n  dragger: {\n    width: '5px',\n    cursor: 'ew-resize',\n    position: 'absolute',\n    top: 0,\n    bottom: 0,\n    left: ({drawerWidth}) => drawerWidth + \"vw\",\n    backgroundColor: \"transparent\",\n    zIndex: 999\n  }\n}));\n\n\nlet isResizing = null;\n\n\nexport default function App() {\n  const editorState = useSelector(selectEditor);\n  const [selectedValue, setSelectedValue] = React.useState('dag');\n  const [open, setOpen] = React.useState(true);\n  const [drawerWidth, setDrawerWidth] = React.useState(18);\n  const classes = useStyles({drawerWidth: drawerWidth});\n\n  const height = \"90vh\";\n  const width = useMemo(() => {\n    let full_width = 100;\n    return (open ? full_width - drawerWidth : full_width) + \"vw\"\n  }, [open, drawerWidth])\n\n  const handleMouseDown = e => {\n    e.stopPropagation();\n    e.preventDefault();\n    document.addEventListener(\"mousemove\", handleMouseMove);\n    document.addEventListener(\"mouseup\", handleMouseUp)\n    isResizing = true;\n  };\n\n  const handleMouseMove = e => {\n    if (!isResizing) {\n      return;\n    }\n    let width = e.clientX * 100 / window.innerWidth;\n    let minWidth = 10, maxWidth = 50;\n    if (width > minWidth && width < maxWidth) {\n      setDrawerWidth(width);\n    }\n  }\n\n  const handleMouseUp = () => {\n    if (!isResizing) {\n      return;\n    }\n    isResizing = false;\n    document.removeEventListener(\"mousemove\", handleMouseMove);\n    document.removeEventListener(\"mouseup\", handleMouseUp);\n  }\n\n  return (\n    <Router>\n      <div>\n        <Box>\n          <AppBar position=\"fixed\" className={classes.appBar}>\n            <Toolbar variant=\"dense\">\n              <IconButton\n                edge=\"start\"\n                className={classes.menuButton}\n                color=\"inherit\"\n                aria-label=\"menu\"\n                onClick={() => {\n                  setOpen(!open)\n                }}\n              >\n                {open ? <ChevronLeftIcon/> : <MenuIcon/>}\n              </IconButton>\n              <Typography variant=\"h6\" className={classes.title}>\n                SQLLineage\n              </Typography>\n              {editorState.editable ?\n                <Tooltip title=\"Visualize Lineage By Filling In Your Own SQL\" arrow>\n                  <div>Composing Mode</div>\n                </Tooltip> :\n                <Link to=\"/\" style={{color: \"white\"}}>\n                  <Tooltip title=\"Enter Composing Mode to Visualize Your Own SQL\" arrow>\n                    <IconButton\n                      color=\"inherit\"\n                      onClick={() => {\n                        setSelectedValue(\"script\");\n                        setOpen(false);\n                      }}\n                    >\n                      <CreateIcon/>\n                    </IconButton>\n                  </Tooltip>\n                </Link>\n              }\n            </Toolbar>\n          </AppBar>\n          <Drawer\n            variant=\"persistent\"\n            open={open}\n            classes={{\n              paper: classes.drawerPaper,\n            }}\n          >\n            <Box className={classes.content}>\n              <Directory/>\n            </Box>\n          </Drawer>\n        </Box>\n        <div\n          id=\"dragger\"\n          onMouseDown={handleMouseDown}\n          className={clsx(classes.dragger, {[classes.hide]: !open})}\n        />\n        <main\n          className={clsx(classes.content, {[classes.contentShift]: open})}\n        >\n          <Paper elevation=\"24\" style={{height: height, width: width}}>\n            <Box className={selectedValue === \"dag\" ? \"\" : classes.hide}>\n              <DAG height={height} width={width}/>\n            </Box>\n            <Box className={selectedValue === \"text\" ? \"\" : classes.hide}>\n              <DAGDesc height={height} width={width}/>\n            </Box>\n            <Box className={selectedValue === \"script\" ? \"\" : classes.hide}>\n              <Editor height={height} width={width}/>\n            </Box>\n          </Paper>\n          <Grid container justify=\"center\">\n            <FormControl component=\"fieldset\">\n              <RadioGroup row aria-label=\"position\" name=\"position\" defaultValue=\"dag\"\n                          value={selectedValue}\n                          onChange={(event) => setSelectedValue(event.target.value)}>\n                <FormControlLabel\n                  value=\"dag\"\n                  control={<Radio color=\"primary\"/>}\n                  label=\"Lineage View\"\n                />\n                <FormControlLabel\n                  value=\"text\"\n                  control={<Radio color=\"primary\"/>}\n                  label=\"Text View\"\n                />\n                <FormControlLabel\n                  value=\"script\"\n                  control={<Radio color=\"primary\"/>}\n                  label=\"Script View\"\n                />\n              </RadioGroup>\n            </FormControl>\n          </Grid>\n        </main>\n      </div>\n    </Router>\n  )\n}\n","import {configureStore} from '@reduxjs/toolkit';\nimport directoryReducer from '../features/directory/directorySlice';\nimport editorReducer from '../features/editor/editorSlice';\n\nexport default configureStore({\n  reducer: {\n    directory: directoryReducer,\n    editor: editorReducer,\n  },\n});\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport store from \"./app/store\";\nimport {Provider} from \"react-redux\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App/>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}