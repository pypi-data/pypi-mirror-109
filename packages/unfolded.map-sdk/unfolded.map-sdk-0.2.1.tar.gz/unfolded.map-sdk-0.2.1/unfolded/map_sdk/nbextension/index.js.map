{"version":3,"sources":["webpack://@unfolded/jupyter-map-sdk/./css/widget.css","webpack://@unfolded/jupyter-map-sdk/./node_modules/@unfolded/map-sdk/dist/index.js","webpack://@unfolded/jupyter-map-sdk/./node_modules/css-loader/dist/runtime/api.js","webpack://@unfolded/jupyter-map-sdk/./css/widget.css?2598","webpack://@unfolded/jupyter-map-sdk/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://@unfolded/jupyter-map-sdk/./src/extension.ts","webpack://@unfolded/jupyter-map-sdk/./src/index.ts","webpack://@unfolded/jupyter-map-sdk/./src/jupyter-transport.ts","webpack://@unfolded/jupyter-map-sdk/./src/version.ts","webpack://@unfolded/jupyter-map-sdk/./src/widget-model.ts","webpack://@unfolded/jupyter-map-sdk/./src/widget-view.ts","webpack://@unfolded/jupyter-map-sdk/external \"@jupyter-widgets/base\"","webpack://@unfolded/jupyter-map-sdk/webpack/bootstrap","webpack://@unfolded/jupyter-map-sdk/webpack/runtime/define property getters","webpack://@unfolded/jupyter-map-sdk/webpack/runtime/hasOwnProperty shorthand","webpack://@unfolded/jupyter-map-sdk/webpack/runtime/make namespace object","webpack://@unfolded/jupyter-map-sdk/webpack/startup"],"names":["exports","___CSS_LOADER_API_IMPORT___","push","module","id","e","SET_VIEW_STATE","GET_LAYERS","ADD_LAYER","REMOVE_LAYER","SET_LAYER_VISIBILITY","SET_THEME","MAP_INITIALIZED","GET_TIMELINE_INFO","TOGGLE_TIMELINE_ANIMATION","TOGGLE_TIMELINE_VISIBILITY","SET_TIMELINE_INTERVAL","TIMELINE_INTERVAL_CHANGED","SET_TIMELINE_SPEED","SET_TIMELINE_CONFIG","REFRESH_MAP_DATA","GET_LAYER_TIMELINE_INFO","LAYER_ANIMATION_TIME_CHANGED","SET_LAYER_TIMELINE_CONFIG","SET_MAP_CONTROL_VISIBILITY","ADD_TILESET_TO_MAP","ADD_DATASET_TO_MAP","REMOVE_DATASET_FROM_MAP","SET_FILTER","REMOVE_FILTER","FILTER_CHANGED","t","Object","assign","n","r","arguments","length","i","prototype","hasOwnProperty","call","apply","this","mapEventHandlers","iframe","onLoad","s","onTimelineIntervalChange","a","onLayerTimelineTimeChange","o","onFilter","window","addEventListener","data","JSON","parse","source","type","u","Error","message","resolve","reject","sendMessage","Promise","Set","stringify","has","add","contentWindow","postMessage","setMapEventHandlers","document","createElement","_transport","appendToElement","appendToDocument","d","E","appendToId","p","T","embed","f","I","width","c","l","height","m","_","mapUUID","mapUrl","setAttribute","style","L","getElementById","HTMLElement","body","querySelector","replaceWith","appendChild","setViewState","viewState","getLayers","setLayerVisibility","layerId","isVisible","setTheme","theme","getTimelineInfo","idx","setTimelineConfig","config","refreshMapData","getLayerTimelineInfo","setLayerTimelineConfig","setMapControlVisibility","_addTileset","tileset","addDataset","dataset","uuid","autoCreateLayers","then","status","removeDataset","addLayer","removeLayer","setFilter","info","removeFilter","startTime","endTime","speed","M","h","y","g","A","v","N","S","useSourceMap","list","toString","map","item","content","sourceMap","base64","cssMapping","btoa","sourceMapping","unescape","encodeURIComponent","concat","sourceURLs","sources","sourceRoot","join","cssWithMappingToString","modules","mediaQuery","dedupe","alreadyImportedModules","_i","api","__esModule","default","locals","memo","getTarget","target","styleTarget","HTMLIFrameElement","contentDocument","head","stylesInDom","getIndexByIdentifier","identifier","result","modulesToDom","options","idCountMap","identifiers","base","count","index","obj","css","media","references","updater","addStyle","insertStyleElement","attributes","nonce","keys","forEach","key","insert","textStore","replaceText","replacement","filter","Boolean","applyToSingletonTag","remove","styleSheet","cssText","cssNode","createTextNode","childNodes","removeChild","insertBefore","applyToTag","removeAttribute","firstChild","singleton","singletonCounter","update","styleIndex","bind","parentNode","removeStyleElement","newObj","all","atob","lastIdentifiers","newList","newLastIdentifiers","_index","splice","__webpack_public_path__","getAttribute","CallbackNames","model","queue","Array","mapReady","destroyed","finalize","off","messageReceived","stopListening","get","buffers","console","log","sendMessageToMapSDK","sendResponseToJupyter","messageId","response","send","sendCallbackEventToJupyter","eventType","on","listenTo","value","msg","undefined","shift","ON_FILTER","ON_LOAD","ON_TIMELINE_INTERVAL_CHANGE","ON_LAYER_TIMELINE_TIME_CHANGE","MODULE_VERSION","version","MODULE_NAME","name","UnfoldedMapModel","DOMWidgetModel","transport","onMapLoaded","setMapReady","super","defaults","_model_name","model_name","_model_module","model_module","_model_module_version","model_module_version","_view_name","view_name","_view_module","view_module","_view_module_version","view_module_version","serializers","UnfoldedMapView","DOMWidgetView","UnfoldedMap","set","save_changes","el","classList","__WEBPACK_EXTERNAL_MODULE__612__","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","definition","defineProperty","enumerable","prop","Symbol","toStringTag"],"mappings":"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","file":"index.js","sourcesContent":["// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".unfolded-widget {\\n    width: 100%;\\n    height: 100%;\\n    min-height: 400px;\\n}\\n.unfolded-widget iframe {\\n    border: none;\\n}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var e;!function(e){e.SET_VIEW_STATE=\"map-sdk-set-view-state\",e.GET_LAYERS=\"map-sdk-get-layers\",e.ADD_LAYER=\"map-sdk-add-layer\",e.REMOVE_LAYER=\"map-sdk-remove-layer\",e.SET_LAYER_VISIBILITY=\"map-sdk-set-layer-visibility\",e.SET_THEME=\"map-sdk-set-theme\",e.MAP_INITIALIZED=\"map-sdk-initialized\",e.GET_TIMELINE_INFO=\"map-sdk-get-timeline-info\",e.TOGGLE_TIMELINE_ANIMATION=\"map-sdk-toggle-timeline-animation\",e.TOGGLE_TIMELINE_VISIBILITY=\"map-sdk-toggle-timeline-visibility\",e.SET_TIMELINE_INTERVAL=\"map-sdk-set-timeline-interval\",e.TIMELINE_INTERVAL_CHANGED=\"map-sdk-timeline-interval-changed\",e.SET_TIMELINE_SPEED=\"map-sdk-set-timeline-speed\",e.SET_TIMELINE_CONFIG=\"map-sdk-set-timeline-config\",e.REFRESH_MAP_DATA=\"map-sdk-reload-map-data\",e.GET_LAYER_TIMELINE_INFO=\"map-sdk-get-layer-timeline-info\",e.LAYER_ANIMATION_TIME_CHANGED=\"map-sdk-layer-animation-time-changed\",e.SET_LAYER_TIMELINE_CONFIG=\"map-sdk-set-layer-timeline-config\",e.SET_MAP_CONTROL_VISIBILITY=\"map-sdk-set-map-control-visibility\",e.ADD_TILESET_TO_MAP=\"map-sdk-add-tileset-top-map\",e.ADD_DATASET_TO_MAP=\"map-sdk-add-dataset-to-map\",e.REMOVE_DATASET_FROM_MAP=\"map-sdk-remove-dataset-from-map\",e.SET_FILTER=\"map-sdk-set-filter\",e.REMOVE_FILTER=\"map-sdk-remove-filter\",e.FILTER_CHANGED=\"map-sdk-filter-changed\"}(e||(e={}));\n/*! *****************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\nvar t=function(){return(t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function n(e){return\"https://studio.unfolded.ai/public/\"+e}var r=function(){function n(t,n){var r=this;this.mapEventHandlers={},this.iframe=t;var i=n.onLoad,s=n.onTimelineIntervalChange,a=n.onLayerTimelineTimeChange,o=n.onFilter;this.mapEventHandlers={onLoad:i,onTimelineIntervalChange:s,onLayerTimelineTimeChange:a,onFilter:o},window.addEventListener(\"message\",(function(t){!function(t,n,r,i,s){var a=function(e){if(\"string\"!=typeof e.data)return;try{var t=JSON.parse(e.data),n=t.source,r=t.type;if(\"unfolded-sdk-server\"!==n||!r)return;return t}catch(e){return}}(t);if(!a)return;var o=a.data,u=a.type;if(function(t,n,r){switch(t){case e.MAP_INITIALIZED+\"-response\":n.onLoad&&n.onLoad();break;case e.TIMELINE_INTERVAL_CHANGED+\"-response\":n.onTimelineIntervalChange&&n.onTimelineIntervalChange(r);break;case e.LAYER_ANIMATION_TIME_CHANGED+\"-response\":n.onLayerTimelineTimeChange&&n.onLayerTimelineTimeChange(r);break;case e.FILTER_CHANGED+\"-response\":n.onFilter&&n.onFilter(r)}}(u,s,o),n&&r&&i)switch(u){case n+\"-response\":r(o);break;case n+\"-error\":i(new Error(null==o?void 0:o.message))}}(t,r.type,r.resolve,r.reject,r.mapEventHandlers)}))}return n.prototype.sendMessage=function(e,t){var n=this,r=this.iframe;return new Promise((function(i,s){var a,o,u=(a={type:e,source:\"unfolded-sdk-client\",data:t},o=new Set,JSON.stringify(a,(function(e,t){if(\"object\"==typeof t&&null!==t){if(o.has(t))try{return JSON.parse(JSON.stringify(t))}catch(e){return}o.add(t)}return t})));r&&r.contentWindow&&(r.contentWindow.postMessage(u,\"*\"),n.type=e,n.resolve=i,n.reject=s)}))},n.prototype.setMapEventHandlers=function(e){this.mapEventHandlers=e?t(t({},this.mapEventHandlers),e):{}},n}();var i=function(){function t(e){this.iframe=document.createElement(\"iframe\"),this._transport=new r(this.iframe,e),function(e,t){var r=t||{},i=r.id,a=void 0===i?\"unfolded_iframe\":i,o=r.appendToElement,u=r.appendToDocument,d=void 0===u||u,E=r.appendToId,p=void 0===E?null:E,T=r.embed,f=void 0!==T&&T,I=r.width,c=void 0===I?\"100%\":I,l=r.height,m=void 0===l?\"100%\":l,_=t.mapUUID?n(t.mapUUID):t.mapUrl;_||(_=\"https://studio.unfolded.ai/incognito\");f&&(_+=\"/embed\");e.setAttribute(\"src\",_),e.setAttribute(\"id\",a),e.setAttribute(\"width\",\"\"+c),e.setAttribute(\"height\",\"\"+m),e.style.width=s(c),e.style.height=s(m);var L=function(e,t,n){if(e||t){var r=e||(t?document.getElementById(t):null);if(r instanceof HTMLElement)return r}else if(n)return document.body;return}(o,p,d);if(L)!function(e,t,n){var r=e.querySelector&&e.querySelector(\"iframe#\"+t);r?r.replaceWith(n):e.appendChild(n)}(L,a,e);else if(d)throw new Error(\"Target container element not found\")}(this.iframe,e)}return t.prototype.sendMessage=function(e,t){return this._transport.sendMessage(e,t)},t.prototype.setMapEventHandlers=function(e){this._transport.setMapEventHandlers(e)},t.prototype.setViewState=function(t){return this.sendMessage(e.SET_VIEW_STATE,{viewState:t})},t.prototype.getLayers=function(){return this.sendMessage(e.GET_LAYERS,{})},t.prototype.setLayerVisibility=function(t,n){return this.sendMessage(e.SET_LAYER_VISIBILITY,{layerId:t,isVisible:n})},t.prototype.setTheme=function(t){return this.sendMessage(e.SET_THEME,{theme:t})},t.prototype.getTimelineInfo=function(t){return this.sendMessage(e.GET_TIMELINE_INFO,{idx:t})},t.prototype.setTimelineConfig=function(t){return this.sendMessage(e.SET_TIMELINE_CONFIG,{config:t})},t.prototype.refreshMapData=function(){return this.sendMessage(e.REFRESH_MAP_DATA,{})},t.prototype.getLayerTimelineInfo=function(){return this.sendMessage(e.GET_LAYER_TIMELINE_INFO,{})},t.prototype.setLayerTimelineConfig=function(t){return this.sendMessage(e.SET_LAYER_TIMELINE_CONFIG,{config:t})},t.prototype.setMapControlVisibility=function(t){return this.sendMessage(e.SET_MAP_CONTROL_VISIBILITY,{config:t})},t.prototype._addTileset=function(t){return this.sendMessage(e.ADD_TILESET_TO_MAP,{tileset:t})},t.prototype.addDataset=function(t,n){return void 0===n&&(n=!0),this.sendMessage(e.ADD_DATASET_TO_MAP,{dataset:\"string\"==typeof t?{uuid:t}:t,autoCreateLayers:n}).then((function(e){return e&&\"ok\"===e.status}))},t.prototype.removeDataset=function(t){return this.sendMessage(e.REMOVE_DATASET_FROM_MAP,{uuid:t}).then((function(e){return e&&\"ok\"===e.status}))},t.prototype.addLayer=function(t){return this.sendMessage(e.ADD_LAYER,t).then((function(e){return e&&\"ok\"===e.status}))},t.prototype.removeLayer=function(t){return this.sendMessage(e.REMOVE_LAYER,{id:t}).then((function(e){return e&&\"ok\"===e.status}))},t.prototype.setFilter=function(t){return this.sendMessage(e.SET_FILTER,{info:t}).then((function(e){return e&&\"ok\"===e.status}))},t.prototype.removeFilter=function(t){return this.sendMessage(e.REMOVE_FILTER,{id:t}).then((function(e){return e&&\"ok\"===e.status}))},t}();function s(e){return\"number\"==typeof e?e+\"px\":e}function a(e){return new i(e)}function o(e,t){return e.setViewState(t)}function u(e){return e.getLayers()}function d(e,t,n){return e.setLayerVisibility(t,n)}function E(e,t){return e.setTheme(t)}function p(e,t){return e.getTimelineInfo(t)}function T(t,n){return t.sendMessage(e.TOGGLE_TIMELINE_ANIMATION,{idx:n})}function f(t,n){return t.sendMessage(e.TOGGLE_TIMELINE_VISIBILITY,{idx:n})}function I(t,n,r,i){return t.sendMessage(e.SET_TIMELINE_INTERVAL,{idx:n,startTime:r,endTime:i})}function c(t,n,r){return t.sendMessage(e.SET_TIMELINE_SPEED,{idx:n,speed:r})}function l(e,t){return e.setTimelineConfig(t)}function m(e){return e.refreshMapData()}function _(e){return e.getLayerTimelineInfo()}function L(e,t){return e.setLayerTimelineConfig(t)}function M(e,t){return e.setMapControlVisibility(t)}function h(e,t){return e._addTileset(t)}function y(e,t){return e.addDataset(t)}function g(e,t){return e.removeDataset(t)}function A(e,t){return e.addLayer(t)}function v(e,t){return e.removeLayer(t)}function N(e,t){return e.setFilter(t)}function S(e,t){return e.removeFilter(t)}export{e as ActionType,i as UnfoldedMap,h as _addTileset,y as addDataset,A as addLayer,a as createMap,_ as getLayerTimelineInfo,u as getLayers,n as getMapUrl,p as getTimelineInfo,m as refreshMapData,g as removeDataset,S as removeFilter,v as removeLayer,N as setFilter,L as setLayerTimelineConfig,d as setLayerVisibility,M as setMapControlVisibility,E as setTheme,c as setTimelineAnimationSpeed,l as setTimelineConfig,I as setTimelineInterval,o as setViewState,T as toggleTimelineAnimation,f as toggleTimelineVisibility};\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || '').concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}","var api = require(\"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../node_modules/css-loader/dist/cjs.js!./widget.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","\"use strict\";\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce = typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.media ? \"@media \".concat(obj.media, \" {\").concat(obj.css, \"}\") : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && typeof btoa !== 'undefined') {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\n\n// Entry point for the notebook bundle containing custom model definitions.\n//\n// Setup notebook base URL\n//\n// Some static assets may be required by the custom widget javascript. The base\n// url for the notebook is not known at build time and is therefore computed\n// dynamically.\n// eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n(window as any).__webpack_public_path__ =\n  document.querySelector('body')!.getAttribute('data-base-url') +\n  'nbextensions/unfolded/map_sdk';\n\nexport * from './index';\n","export * from './version';\nexport * from './widget-model';\nexport * from './widget-view';\n","import { UnfoldedMapModel } from './widget-model';\nimport { UnfoldedMap } from '@unfolded/map-sdk';\n\nexport interface Message {\n  messageId: string;\n  type: string;\n  data: object;\n}\n\n/**\n * These must match to the fields of the Python class models.MapEventHandlers\n */\nenum CallbackNames {\n  ON_LOAD = 'on_load',\n  ON_FILTER = 'on_filter',\n  ON_TIMELINE_INTERVAL_CHANGE = 'on_timeline_interval_change',\n  ON_LAYER_TIMELINE_TIME_CHANGE = 'on_layer_timeline_time_change'\n}\n\nexport default class JupyterTransport {\n  private readonly model: UnfoldedMapModel;\n  private readonly queue: Array<Message> = new Array<Message>();\n  private mapReady: boolean = false;\n  private destroyed: boolean = false;\n\n  constructor(model: UnfoldedMapModel) {\n    this.model = model;\n    this.model.on('msg:custom', this.messageReceived);\n    this.model.listenTo(this.model, 'destroy', this.finalize);\n  }\n\n  setMapReady(value: boolean) {\n    this.mapReady = value;\n    if (this.mapReady) {\n      let msg;\n      while ((msg = this.queue.shift()) !== undefined) {\n        this.sendMessageToMapSDK(msg);\n      }\n      const map: UnfoldedMap = this.model.get('map');\n      if (map) {\n        // Register all callbacks\n        map.setMapEventHandlers({\n          onFilter: info =>\n            this.sendCallbackEventToJupyter(CallbackNames.ON_FILTER, info),\n          onLoad: () => this.sendCallbackEventToJupyter(CallbackNames.ON_LOAD),\n          onTimelineIntervalChange: info =>\n            this.sendCallbackEventToJupyter(\n              CallbackNames.ON_TIMELINE_INTERVAL_CHANGE,\n              info\n            ),\n          onLayerTimelineTimeChange: info =>\n            this.sendCallbackEventToJupyter(\n              CallbackNames.ON_LAYER_TIMELINE_TIME_CHANGE,\n              info\n            )\n        });\n      }\n    }\n  }\n\n  protected finalize = () => {\n    this.destroyed = true;\n    this.model.off('msg:custom', this.messageReceived);\n    this.model.stopListening(this.model, 'destroy', this.finalize);\n    const map: UnfoldedMap = this.model.get('map');\n    if (map) {\n      // Unregister all callbacks\n      map.setMapEventHandlers(null);\n    }\n  };\n\n  /**\n   * Forwards messages received from Jupyter to Map SDK\n   * @param message\n   * @param buffers\n   */\n  protected messageReceived = (\n    message: Message,\n    buffers?: ArrayBuffer[] | ArrayBufferView[]\n  ) => {\n    if (this.destroyed) return;\n    console.log('messageReceived', message);\n\n    if (this.mapReady) {\n      this.sendMessageToMapSDK(message);\n    } else {\n      // Keep messages in the queue for until map is ready\n      this.queue.push(message);\n    }\n  };\n\n  protected sendMessageToMapSDK(message: Message) {\n    const { messageId, type, data } = message;\n    const map = this.model.get('map');\n    map\n      .sendMessage(type, data)\n      .then((result: object) => this.sendResponseToJupyter(messageId, result));\n  }\n\n  /**\n   * Back-channel messaging: sending responses from Map SDK to Jupyter\n   */\n  protected sendResponseToJupyter = (messageId: string, data: object) => {\n    if (this.destroyed) return;\n    const response = { messageId, data };\n    console.log('sendResponse', response);\n    this.model.send(response, []);\n  };\n\n  /**\n   * Notify Jupyter of a callback event\n   */\n  protected sendCallbackEventToJupyter = (\n    eventType: CallbackNames,\n    info: any = undefined\n  ) => {\n    this.model.send({ eventType, data: info }, []);\n  };\n}\n","// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\n// eslint-disable-next-line @typescript-eslint/no-var-requires\nconst data = require('../package.json');\n\n/**\n * The _model_module_version/_view_module_version this package implements.\n *\n * The html widget manager assumes that this is the same as the npm package\n * version number.\n */\nexport const MODULE_VERSION = data.version;\n\n/*\n * The current package name.\n */\nexport const MODULE_NAME = data.name;\n","import { DOMWidgetModel, ISerializers } from '@jupyter-widgets/base';\nimport { MODULE_NAME, MODULE_VERSION } from './version';\nimport JupyterTransport from './jupyter-transport';\n\nexport class UnfoldedMapModel extends DOMWidgetModel {\n  transport = new JupyterTransport(this);\n\n  defaults() {\n    return {\n      ...super.defaults(),\n      _model_name: UnfoldedMapModel.model_name,\n      _model_module: UnfoldedMapModel.model_module,\n      _model_module_version: UnfoldedMapModel.model_module_version,\n      _view_name: UnfoldedMapModel.view_name,\n      _view_module: UnfoldedMapModel.view_module,\n      _view_module_version: UnfoldedMapModel.view_module_version,\n      map: null\n    };\n  }\n\n  onMapLoaded = () => {\n    this.transport.setMapReady(true);\n  };\n\n  static serializers: ISerializers = {\n    ...DOMWidgetModel.serializers\n    // Add any extra serializers here\n    // data_buffer: {deserialize: deserializeMatrix}\n  };\n\n  static model_name = 'UnfoldedMapModel';\n  static model_module = MODULE_NAME;\n  static model_module_version = MODULE_VERSION;\n  static view_name = 'UnfoldedMapView'; // Set to null if no view\n  static view_module = MODULE_NAME; // Set to null if no view\n  static view_module_version = MODULE_VERSION;\n}\n","import { DOMWidgetView } from '@jupyter-widgets/base';\n\nimport '../css/widget.css';\nimport { UnfoldedMap } from '@unfolded/map-sdk';\nimport { UnfoldedMapModel } from './widget-model';\n\nexport class UnfoldedMapView extends DOMWidgetView {\n  initialize() {\n    const width = this.model.get('width');\n    const height = this.model.get('height');\n    const mapUUID = this.model.get('mapUUID');\n    const mapUrl = this.model.get('mapUrl');\n\n    const map = new UnfoldedMap({\n      mapUUID,\n      mapUrl,\n      appendToDocument: false,\n      width,\n      height,\n      embed: true,\n      onLoad: (this.model as UnfoldedMapModel).onMapLoaded\n    });\n\n    // TODO: do we really need to store map in the widget model?\n    this.model.set('map', map);\n    this.model.save_changes();\n\n    return map;\n  }\n\n  render() {\n    this.el.classList.add('unfolded-widget');\n\n    const map = this.model.get('map');\n\n    const { iframe } = map;\n    this.el.appendChild(iframe);\n  }\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__612__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(112);\n"],"sourceRoot":""}